/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("widget-stdmod",function(b){var f=b.Lang,q=b.Node,x=b.UA,e=b.Widget,d="",J="hd",G="bd",j="ft",D="header",M="body",K="footer",N="fillHeight",m="stdmod",u="Node",I="Content",C="firstChild",h="childNodes",n="ownerDocument",v="contentBox",z="height",F="offsetHeight",y="auto",l="headerContentChange",B="bodyContentChange",o="footerContentChange",r="fillHeightChange",t="heightChange",O="contentUpdate",w="renderUI",E="bindUI",g="syncUI",H="_applyParsedConfig",s=b.Widget.UI_SRC;function P(L){this._stdModNode=this.get(v);b.before(this._renderUIStdMod,this,w);b.before(this._bindUIStdMod,this,E);b.before(this._syncUIStdMod,this,g);}P.HEADER=D;P.BODY=M;P.FOOTER=K;P.AFTER="after";P.BEFORE="before";P.REPLACE="replace";var k=P.HEADER,A=P.BODY,p=P.FOOTER,a=k+I,c=p+I,i=A+I;P.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:P.BODY,validator:function(L){return this._validateFillHeight(L);}}};P.HTML_PARSER={headerContent:function(L){return this._parseStdModHTML(k);},bodyContent:function(L){return this._parseStdModHTML(A);},footerContent:function(L){return this._parseStdModHTML(p);}};P.SECTION_CLASS_NAMES={header:e.getClassName(J),body:e.getClassName(G),footer:e.getClassName(j)};P.TEMPLATES={header:'<div class="'+P.SECTION_CLASS_NAMES[k]+'"></div>',body:'<div class="'+P.SECTION_CLASS_NAMES[A]+'"></div>',footer:'<div class="'+P.SECTION_CLASS_NAMES[p]+'"></div>'};P.prototype={_syncUIStdMod:function(){var L=this._stdModParsed;if(!L||!L[a]){this._uiSetStdMod(k,this.get(a));}if(!L||!L[i]){this._uiSetStdMod(A,this.get(i));}if(!L||!L[c]){this._uiSetStdMod(p,this.get(c));}this._uiSetFillHeight(this.get(N));},_renderUIStdMod:function(){this._stdModNode.addClass(e.getClassName(m));this._renderStdModSections();this.after(l,this._afterHeaderChange);this.after(B,this._afterBodyChange);this.after(o,this._afterFooterChange);},_renderStdModSections:function(){if(f.isValue(this.get(a))){this._renderStdMod(k);}if(f.isValue(this.get(i))){this._renderStdMod(A);}if(f.isValue(this.get(c))){this._renderStdMod(p);}},_bindUIStdMod:function(){this.after(r,this._afterFillHeightChange);this.after(t,this._fillHeight);this.after(O,this._fillHeight);},_afterHeaderChange:function(L){if(L.src!==s){this._uiSetStdMod(k,L.newVal,L.stdModPosition);}},_afterBodyChange:function(L){if(L.src!==s){this._uiSetStdMod(A,L.newVal,L.stdModPosition);}},_afterFooterChange:function(L){if(L.src!==s){this._uiSetStdMod(p,L.newVal,L.stdModPosition);}},_afterFillHeightChange:function(L){this._uiSetFillHeight(L.newVal);},_validateFillHeight:function(L){return !L||L==P.BODY||L==P.HEADER||L==P.FOOTER;},_uiSetFillHeight:function(R){var Q=this.getStdModNode(R);var L=this._currFillNode;if(L&&Q!==L){L.setStyle(z,d);}if(Q){this._currFillNode=Q;}this._fillHeight();},_fillHeight:function(){if(this.get(N)){var L=this.get(z);if(L!=d&&L!=y){this.fillHeight(this._currFillNode);}}},_uiSetStdMod:function(S,R,L){if(f.isValue(R)){var Q=this.getStdModNode(S)||this._renderStdMod(S);this._addStdModContent(Q,R,L);this.set(S+I,this._getStdModContent(S),{src:s});}else{this._eraseStdMod(S);}this.fire(O);},_renderStdMod:function(R){var L=this.get(v),Q=this._findStdModSection(R);if(!Q){Q=this._getStdModTemplate(R);}this._insertStdModSection(L,R,Q);this[R+u]=Q;return this[R+u];},_eraseStdMod:function(Q){var L=this.getStdModNode(Q);if(L){L.remove(true);delete this[Q+u];}},_insertStdModSection:function(L,S,R){var Q=L.get(C);if(S===p||!Q){L.appendChild(R);}else{if(S===k){L.insertBefore(R,Q);}else{var T=this[p+u];if(T){L.insertBefore(R,T);}else{L.appendChild(R);}}}},_getStdModTemplate:function(L){return q.create(P.TEMPLATES[L],this._stdModNode.get(n));},_addStdModContent:function(R,Q,L){switch(L){case P.BEFORE:L=0;break;case P.AFTER:L=undefined;break;default:L=P.REPLACE;}R.insert(Q,L);},_getPreciseHeight:function(R){var L=(R)?R.get(F):0,S="getBoundingClientRect";if(R&&R.hasMethod(S)){var Q=R.invoke(S);if(Q){L=Q.bottom-Q.top;}}return L;},_findStdModSection:function(L){return this.get(v).one("> ."+P.SECTION_CLASS_NAMES[L]);},_parseStdModHTML:function(Q){var L=this._findStdModSection(Q);if(L){if(!this._stdModParsed){this._stdModParsed={};b.before(this._applyStdModParsedConfig,this,H);}this._stdModParsed[Q+I]=1;return L.get("innerHTML");}return null;},_applyStdModParsedConfig:function(S,L,R){var Q=this._stdModParsed;if(Q){Q[a]=!(a in L)&&(a in Q);Q[i]=!(i in L)&&(i in Q);Q[c]=!(c in L)&&(c in Q);}},_getStdModContent:function(L){return(this[L+u])?this[L+u].get(h):null;},setStdModContent:function(R,Q,L){this.set(R+I,Q,{stdModPosition:L});},getStdModNode:function(L){return this[L+u]||null;},fillHeight:function(Q){if(Q){var V=this.get(v),W=[this.headerNode,this.bodyNode,this.footerNode],L,X,Y=0,T=0,S=false;for(var U=0,R=W.length;U<R;U++){L=W[U];if(L){if(L!==Q){Y+=this._getPreciseHeight(L);}else{S=true;}}}if(S){if(x.ie||x.opera){Q.set(F,0);}X=V.get(F)-parseInt(V.getComputedStyle("paddingTop"),10)-parseInt(V.getComputedStyle("paddingBottom"),10)-parseInt(V.getComputedStyle("borderBottomWidth"),10)-parseInt(V.getComputedStyle("borderTopWidth"),10);if(f.isNumber(X)){T=X-Y;if(T>=0){Q.set(F,T);}}}}}};b.WidgetStdMod=P;},"3.4.0",{requires:["base-build","widget"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("widget-position",function(a){var i=a.Lang,l=a.Widget,n="xy",j="position",g="positioned",k="boundingBox",h="relative",m="renderUI",f="bindUI",d="syncUI",c=l.UI_SRC,e="xyChange";function b(o){this._posNode=this.get(k);a.after(this._renderUIPosition,this,m);a.after(this._syncUIPosition,this,d);a.after(this._bindUIPosition,this,f);}b.ATTRS={x:{setter:function(o){this._setX(o);},getter:function(){return this._getX();},lazyAdd:false},y:{setter:function(o){this._setY(o);},getter:function(){return this._getY();},lazyAdd:false},xy:{value:[0,0],validator:function(o){return this._validateXY(o);}}};b.POSITIONED_CLASS_NAME=l.getClassName(g);b.prototype={_renderUIPosition:function(){this._posNode.addClass(b.POSITIONED_CLASS_NAME);},_syncUIPosition:function(){var o=this._posNode;if(o.getStyle(j)===h){this.syncXY();}this._uiSetXY(this.get(n));},_bindUIPosition:function(){this.after(e,this._afterXYChange);},move:function(){var o=arguments,p=(i.isArray(o[0]))?o[0]:[o[0],o[1]];this.set(n,p);},syncXY:function(){this.set(n,this._posNode.getXY(),{src:c});},_validateXY:function(o){return(i.isArray(o)&&i.isNumber(o[0])&&i.isNumber(o[1]));},_setX:function(o){this.set(n,[o,this.get(n)[1]]);},_setY:function(o){this.set(n,[this.get(n)[0],o]);},_getX:function(){return this.get(n)[0];},_getY:function(){return this.get(n)[1];},_afterXYChange:function(o){if(o.src!=c){this._uiSetXY(o.newVal);}},_uiSetXY:function(o){this._posNode.setXY(o);}};a.WidgetPosition=b;},"3.4.0",{requires:["base-build","node-screen","widget"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("widget-stack",function(e){var m=e.Lang,s=e.UA,B=e.Node,f=e.Widget,A="zIndex",o="shim",y="visible",C="boundingBox",v="renderUI",g="bindUI",r="syncUI",p="offsetWidth",d="offsetHeight",l="parentNode",a="firstChild",w="ownerDocument",h="width",u="height",k="px",n="shimdeferred",D="shimresize",x="visibleChange",c="widthChange",j="heightChange",z="shimChange",b="zIndexChange",i="contentUpdate",q="stacked";function t(E){this._stackNode=this.get(C);this._stackHandles={};e.after(this._renderUIStack,this,v);e.after(this._syncUIStack,this,r);e.after(this._bindUIStack,this,g);}t.ATTRS={shim:{value:(s.ie==6)},zIndex:{value:0,setter:"_setZIndex"}};t.HTML_PARSER={zIndex:function(E){return this._parseZIndex(E);}};t.SHIM_CLASS_NAME=f.getClassName(o);t.STACKED_CLASS_NAME=f.getClassName(q);t.SHIM_TEMPLATE='<iframe class="'+t.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';t.prototype={_syncUIStack:function(){this._uiSetShim(this.get(o));this._uiSetZIndex(this.get(A));},_bindUIStack:function(){this.after(z,this._afterShimChange);this.after(b,this._afterZIndexChange);},_renderUIStack:function(){this._stackNode.addClass(t.STACKED_CLASS_NAME);},_parseZIndex:function(E){var F;if(!E.inDoc()||E.getStyle("position")==="static"){F="auto";}else{F=E.getComputedStyle("zIndex");}return F==="auto"?null:F;},_setZIndex:function(E){if(m.isString(E)){E=parseInt(E,10);}if(!m.isNumber(E)){E=0;}return E;},_afterShimChange:function(E){this._uiSetShim(E.newVal);},_afterZIndexChange:function(E){this._uiSetZIndex(E.newVal);},_uiSetZIndex:function(E){this._stackNode.setStyle(A,E);},_uiSetShim:function(E){if(E){if(this.get(y)){this._renderShim();}else{this._renderShimDeferred();}if(s.ie==6){this._addShimResizeHandlers();}}else{this._destroyShim();}},_renderShimDeferred:function(){this._stackHandles[n]=this._stackHandles[n]||[];var F=this._stackHandles[n],E=function(G){if(G.newVal){this._renderShim();}};F.push(this.on(x,E));},_addShimResizeHandlers:function(){this._stackHandles[D]=this._stackHandles[D]||[];var F=this.sizeShim,E=this._stackHandles[D];E.push(this.after(x,F));E.push(this.after(c,F));E.push(this.after(j,F));E.push(this.after(i,F));},_detachStackHandles:function(E){var F=this._stackHandles[E],G;if(F&&F.length>0){while((G=F.pop())){G.detach();}}},_renderShim:function(){var E=this._shimNode,F=this._stackNode;if(!E){E=this._shimNode=this._getShimTemplate();F.insertBefore(E,F.get(a));this._detachStackHandles(n);this.sizeShim();}},_destroyShim:function(){if(this._shimNode){this._shimNode.get(l).removeChild(this._shimNode);this._shimNode=null;this._detachStackHandles(n);this._detachStackHandles(D);}},sizeShim:function(){var F=this._shimNode,E=this._stackNode;if(F&&s.ie===6&&this.get(y)){F.setStyle(h,E.get(p)+k);F.setStyle(u,E.get(d)+k);}},_getShimTemplate:function(){return B.create(t.SHIM_TEMPLATE,this._stackNode.get(w));}};e.WidgetStack=t;},"3.4.0",{requires:["base-build","widget"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("widget-position-align",function(a){var f=a.Lang,d="align",b="alignOn",g="visible",i="boundingBox",e="offsetWidth",j="offsetHeight",h="region",k="viewportRegion";function c(l){if(!this._posNode){a.error("WidgetPosition needs to be added to the Widget, "+"before WidgetPositionAlign is added");}a.after(this._bindUIPosAlign,this,"bindUI");a.after(this._syncUIPosAlign,this,"syncUI");}c.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:false,value:false},alignOn:{value:[],validator:a.Lang.isArray}};c.TL="tl";c.TR="tr";c.BL="bl";c.BR="br";c.TC="tc";c.RC="rc";c.BC="bc";c.LC="lc";c.CC="cc";c.prototype={_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles();},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange);this.after("alignOnChange",this._afterAlignOnChange);this.after("visibleChange",this._syncUIPosAlign);},_syncUIPosAlign:function(){var l=this.get(d);this._uiSetVisiblePosAlign(this.get(g));if(l){this._uiSetAlign(l.node,l.points);}},align:function(m,l){if(arguments.length){this.set(d,{node:m,points:l});}else{this._syncUIPosAlign();}return this;},centered:function(l){return this.align(l,[c.CC,c.CC]);},_setAlignCenter:function(l){if(l){this.set(d,{node:l===true?null:l,points:[c.CC,c.CC]});}return l;},_uiSetAlign:function(o,n){if(!f.isArray(n)||n.length!==2){a.error("align: Invalid Points Arguments");return;}var m=this._getRegion(o),l,p,q;if(!m){return;}l=n[0];p=n[1];switch(p){case c.TL:q=[m.left,m.top];break;case c.TR:q=[m.right,m.top];break;case c.BL:q=[m.left,m.bottom];break;case c.BR:q=[m.right,m.bottom];break;case c.TC:q=[m.left+Math.floor(m.width/2),m.top];break;case c.BC:q=[m.left+Math.floor(m.width/2),m.bottom];break;case c.LC:q=[m.left,m.top+Math.floor(m.height/2)];break;case c.RC:q=[m.right,m.top+Math.floor(m.height/2)];break;case c.CC:q=[m.left+Math.floor(m.width/2),m.top+Math.floor(m.height/2)];break;default:break;}if(q){this._doAlign(l,q[0],q[1]);}},_uiSetVisiblePosAlign:function(l){if(l){this._attachPosAlignUIHandles();}else{this._detachPosAlignUIHandles();}},_attachPosAlignUIHandles:function(){if(this._posAlignUIHandles){return;}var n=this.get(i),m=a.bind(this._syncUIPosAlign,this),l=[];a.Array.each(this.get(b),function(r){var q=r.eventName,p=a.one(r.node)||n;if(q){l.push(p.on(q,m));}});this._posAlignUIHandles=l;},_detachPosAlignUIHandles:function(){var l=this._posAlignUIHandles;if(l){new a.EventHandle(l).detach();this._posAlignUIHandles=null;}},_doAlign:function(m,l,p){var o=this._posNode,n;switch(m){case c.TL:n=[l,p];break;case c.TR:n=[l-o.get(e),p];break;case c.BL:n=[l,p-o.get(j)];break;case c.BR:n=[l-o.get(e),p-o.get(j)];break;case c.TC:n=[l-(o.get(e)/2),p];break;case c.BC:n=[l-(o.get(e)/2),p-o.get(j)];break;case c.LC:n=[l,p-(o.get(j)/2)];break;case c.RC:n=[l-o.get(e),p-(o.get(j)/2)];break;case c.CC:n=[l-(o.get(e)/2),p-(o.get(j)/2)];break;default:break;}if(n){this.move(n);}},_getRegion:function(m){var l;if(!m){l=this._posNode.get(k);}else{m=a.Node.one(m);if(m){l=m.get(h);}}return l;},_afterAlignChange:function(l){var m=l.newVal;if(m){this._uiSetAlign(m.node,m.points);}},_afterAlignOnChange:function(l){this._detachPosAlignUIHandles();if(this.get(g)){this._attachPosAlignUIHandles();}}};a.WidgetPositionAlign=c;},"3.4.0",{requires:["widget-position"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("widget-position-constrain",function(c){var f="constrain",d="constrain|xyChange",b="constrainChange",n="preventOverlap",e="align",o="",g="bindUI",i="xy",a="x",m="y",j=c.Node,p="viewportRegion",l="region",k;function h(q){if(!this._posNode){c.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added");}c.after(this._bindUIPosConstrained,this,g);}h.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:false}};k=h._PREVENT_OVERLAP={x:{"tltr":1,"blbr":1,"brbl":1,"trtl":1},y:{"trbr":1,"tlbl":1,"bltl":1,"brtr":1}};h.prototype={getConstrainedXY:function(t,s){s=s||this.get(f);var r=this._getRegion((s===true)?null:s),q=this._posNode.get(l);return[this._constrain(t[0],a,q,r),this._constrain(t[1],m,q,r)];},constrain:function(u,r){var t,q,s=r||this.get(f);if(s){t=u||this.get(i);q=this.getConstrainedXY(t,s);if(q[0]!==t[0]||q[1]!==t[1]){this.set(i,q,{constrained:true});}}},_setConstrain:function(q){return(q===true)?q:j.one(q);},_constrain:function(q,r,z,s){if(s){if(this.get(n)){q=this._preventOverlap(q,r,z,s);}var v=(r==a),y=(v)?s.width:s.height,u=(v)?z.width:z.height,t=(v)?s.left:s.top,w=(v)?s.right-u:s.bottom-u;if(q<t||q>w){if(u<y){if(q<t){q=t;}else{if(q>w){q=w;}}}else{q=t;}}}return q;},_preventOverlap:function(r,s,C,t){var w=this.get(e),B=(s===a),z,v,u,y,A,q;if(w&&w.points&&k[s][w.points.join(o)]){v=this._getRegion(w.node);if(v){z=(B)?C.width:C.height;u=(B)?v.left:v.top;y=(B)?v.right:v.bottom;A=(B)?v.left-t.left:v.top-t.top;q=(B)?t.right-v.right:t.bottom-v.bottom;}if(r>u){if(q<z&&A>z){r=u-z;}}else{if(A<z&&q>z){r=y;}}}return r;},_bindUIPosConstrained:function(){this.after(b,this._afterConstrainChange);this._enableConstraints(this.get(f));},_afterConstrainChange:function(q){this._enableConstraints(q.newVal);},_enableConstraints:function(q){if(q){this.constrain();this._cxyHandle=this._cxyHandle||this.on(d,this._constrainOnXYChange);}else{if(this._cxyHandle){this._cxyHandle.detach();this._cxyHandle=null;}}},_constrainOnXYChange:function(q){if(!q.constrained){q.newVal=this.getConstrainedXY(q.newVal);}},_getRegion:function(q){var r;if(!q){r=this._posNode.get(p);}else{q=j.one(q);if(q){r=q.get(l);}}return r;}};c.WidgetPositionConstrain=h;},"3.4.0",{requires:["widget-position"]});AUI.add("aui-overlay-base",function(a){a.OverlayBase=a.Component.create({NAME:"overlay",ATTRS:{hideClass:{value:false}},AUGMENTS:[a.WidgetPosition,a.WidgetStack,a.WidgetPositionAlign,a.WidgetPositionConstrain,a.WidgetStdMod]});},"1.5.2",{requires:["aui-component","widget-position","widget-stack","widget-position-align","widget-position-constrain","widget-stdmod"]});AUI.add("aui-overlay-mask",function(n){var e=n.Lang,h=e.isArray,i=e.isString,k=e.isNumber,s=e.isValue,x=n.config,l=n.UA,p=(l.ie&&l.version.major<=6),w="absolute",d="alignPoints",u="background",v="boundingBox",j="contentBox",r="fixed",o="height",a="offsetHeight",f="offsetWidth",q="opacity",t="overlaymask",m="position",g="target",b="width";var c=n.Component.create({NAME:t,ATTRS:{alignPoints:{value:["tl","tl"],validator:h},background:{lazyAdd:false,value:null,validator:i,setter:function(y){if(y){this.get(j).setStyle(u,y);}return y;}},target:{cloneDefaultValue:false,lazyAdd:false,value:x.doc,setter:function(z){var y=this;var C=n.one(z);var B=y._isDoc=C.compareTo(x.doc);var A=y._isWin=C.compareTo(x.win);y._fullPage=B||A;return C;}},opacity:{value:0.5,validator:k,setter:function(y){return this._setOpacity(y);}},shim:{value:n.UA.ie},visible:{value:false},zIndex:{value:1000}},EXTENDS:n.OverlayBase,prototype:{bindUI:function(){var y=this;c.superclass.bindUI.apply(this,arguments);y.after("targetChange",y._afterTargetChange);y.after("visibleChange",y._afterVisibleChange);n.on("windowresize",n.bind(y.refreshMask,y));},syncUI:function(){var y=this;y.refreshMask();},getTargetSize:function(){var z=this;var D=z.get(g);var B=z._isDoc;var A=z._isWin;var y=D.get(a);var C=D.get(f);if(p){if(A){C=n.DOM.winWidth();y=n.DOM.winHeight();}else{if(B){C=n.DOM.docWidth();y=n.DOM.docHeight();}}}else{if(z._fullPage){y="100%";C="100%";}}return{height:y,width:C};},refreshMask:function(){var z=this;var F=z.get(d);var E=z.get(g);var B=z.get(v);var D=z.getTargetSize();var A=z._fullPage;B.setStyles({position:(p||!A)?w:r,left:0,top:0});var y=D.height;var C=D.width;if(s(y)){z.set(o,y);}if(s(C)){z.set(b,C);}if(!A){z.align(E,F);}},_setOpacity:function(z){var y=this;y.get(j).setStyle(q,z);return z;},_uiSetVisible:function(z){var y=this;c.superclass._uiSetVisible.apply(this,arguments);if(z){y._setOpacity(y.get(q));}},_afterTargetChange:function(z){var y=this;y.refreshMask();},_afterVisibleChange:function(z){var y=this;y._uiSetVisible(z.newVal);},_uiSetXY:function(){var y=this;if(!y._fullPage||p){c.superclass._uiSetXY.apply(y,arguments);}}}});n.OverlayMask=c;},"1.5.2",{skinnable:true,requires:["aui-base","aui-overlay-base","event-resize"]});AUI.add("aui-loading-mask",function(n){var g=n.Lang,u="boundingBox",l="contentBox",q="hide",t="host",b="messageEl",h="loadingmask",m="position",f="show",j="static",s="strings",k="target",e="toggle",i=n.getClassName,p=i(h),v=i(h,"masked"),a=i(h,"masked","relative"),c=i(h,"message"),o=i(h,"message","content"),r='<div class="'+c+'"><div class="'+o+'">{0}</div></div>';var d=n.Component.create({NAME:h,NS:h,ATTRS:{messageEl:{valueFn:function(y){var x=this;var w=x.get(s);return n.Node.create(g.sub(r,[w.loading]));}},strings:{value:{loading:"Loading&hellip;"}},target:{setter:function(){var w=this;var x=w.get(t);if(x instanceof n.Widget){x=x.get(l);}return x;},value:null}},EXTENDS:n.Plugin.Base,prototype:{initializer:function(x){var w=this;w.IGNORED_ATTRS=n.merge({host:true},d.ATTRS);w.renderUI();w.bindUI();w._createDynamicAttrs(x);},renderUI:function(){var x=this;var w=x.get(s);x._renderOverlayMask();x.overlayMask.get(u).append(x.get(b));},bindUI:function(){var w=this;w._bindOverlayMaskUI();},_bindOverlayMaskUI:function(){var w=this;w.overlayMask.after("visibleChange",w._afterVisibleChange,w);},centerMessage:function(){var w=this;w.get(b).center(w.overlayMask.get(u));},refreshMask:function(){var w=this;w.overlayMask.refreshMask();w.centerMessage();},_afterVisibleChange:function(x){var w=this;var y=w.get(k);var z=(y.getStyle(m)==j);y.toggleClass(v,(x.newVal));y.toggleClass(a,(x.newVal&&z));if(x.newVal){w.refreshMask();}},_renderOverlayMask:function(){var w=this;var x=w.get(k);w.overlayMask=new n.OverlayMask({target:x,cssClass:p}).render(x);},_createDynamicAttrs:function(x){var w=this;n.each(x,function(A,z){var y=w.IGNORED_ATTRS[z];if(!y){w.addAttr(z,{setter:function(B){this.overlayMask.set(z,B);return B;},value:A});}});}}});n.each([q,f,e],function(w){d.prototype[w]=function(){this.overlayMask[w]();};});n.LoadingMask=d;},"1.5.2",{requires:["aui-overlay-mask","plugin"],skinnable:true});AUI.add("aui-io-plugin",function(s){var n=s.Lang,o=n.isBoolean,p=n.isString,t=function(A){return(A instanceof s.Node);},u=s.WidgetStdMod,c="Node",l="Widget",E="",d="failure",g="failureMessage",w="host",h="icon",i="io",e="IOPlugin",v="loading",f="loadingMask",D="node",r="outer",z="parseContent",k="queue",b="rendered",m="section",C="showLoading",y="success",q="type",a="where",x=s.getClassName,j=x(h,v);var B=s.Component.create({NAME:e,NS:i,ATTRS:{node:{value:null,getter:function(H){var A=this;if(!H){var G=A.get(w);var F=A.get(q);if(F==c){H=G;}else{if(F==l){var I=A.get(m);if(!G.getStdModNode(I)){G.setStdModContent(I,E);}H=G.getStdModNode(I);}}}return s.one(H);},validator:t},failureMessage:{value:"Failed to retrieve content",validator:p},loadingMask:{value:{}},parseContent:{value:true,validator:o},showLoading:{value:true,validator:o},section:{value:u.BODY,validator:function(A){return(!A||A==u.BODY||A==u.HEADER||A==u.FOOTER);}},type:{readOnly:true,valueFn:function(){var A=this;var F=c;if(A.get(w) instanceof s.Widget){F=l;}return F;},validator:p},where:{value:u.REPLACE,validator:function(A){return(!A||A==u.AFTER||A==u.BEFORE||A==u.REPLACE||A==r);}}},EXTENDS:s.IORequest,prototype:{bindUI:function(){var A=this;A.on("activeChange",A._onActiveChange);A.on(y,A._successHandler);A.on(d,A._failureHandler);if((A.get(q)==l)&&A.get(C)){var F=A.get(w);F.after("heightChange",A._syncLoadingMaskUI,A);F.after("widthChange",A._syncLoadingMaskUI,A);}},_autoStart:function(){var A=this;A.bindUI();B.superclass._autoStart.apply(this,arguments);},_bindParseContent:function(){var A=this;var F=A.get(D);if(F&&!F.ParseContent&&A.get(z)){F.plug(s.Plugin.ParseContent);}},hideLoading:function(){var A=this;var F=A.get(D);if(F.loadingmask){F.loadingmask.hide();}},setContent:function(F){var A=this;A._bindParseContent();A._getContentSetterByType().apply(A,[F]);if(A.overlayMaskBoundingBox){A.overlayMaskBoundingBox.remove();}},showLoading:function(){var A=this;var F=A.get(D);if(F.loadingmask){if(A.overlayMaskBoundingBox){F.append(A.overlayMaskBoundingBox);}}else{F.plug(s.LoadingMask,A.get(f));A.overlayMaskBoundingBox=F.loadingmask.overlayMask.get("boundingBox");}F.loadingmask.show();},start:function(){var A=this;var F=A.get(w);if(!F.get(b)){F.after("render",function(){A._setLoadingUI(true);});}B.superclass.start.apply(A,arguments);},_getContentSetterByType:function(){var A=this;var F={Node:function(J){var G=this;var I=G.get(D);if(J instanceof s.NodeList){J=J.toFrag();}if(J instanceof s.Node){J=J._node;}var H=G.get(a);if(H==r){I.replace(J);}else{I.insert(J,H);}},Widget:function(I){var G=this;var H=G.get(w);H.setStdModContent.apply(H,[G.get(m),I,G.get(a)]);}};return F[this.get(q)];},_setLoadingUI:function(F){var A=this;if(A.get(C)){if(F){A.showLoading();}else{A.hideLoading();}}},_syncLoadingMaskUI:function(){var A=this;A.get(D).loadingmask.refreshMask();},_successHandler:function(F,H,G){var A=this;A.setContent(this.get("responseData"));},_failureHandler:function(F,H,G){var A=this;A.setContent(A.get(g));},_onActiveChange:function(G){var A=this;var F=A.get(w);var H=A.get(q)==l;if(!H||(H&&F&&F.get(b))){A._setLoadingUI(G.newVal);}}}});s.Node.prototype.load=function(J,I,K){var F=this;var H=J.indexOf(" ");var A;if(H>0){A=J.slice(H,J.length);J=J.slice(0,H);}if(n.isFunction(I)){K=I;I=null;}I=I||{};if(K){I.after=I.after||{};I.after.success=K;}var G=I.where;I.uri=J;I.where=G;if(A){I.selector=A;I.where=G||"replace";}F.plug(s.Plugin.IO,I);return F;};s.namespace("Plugin").IO=B;},"1.5.2",{requires:["aui-overlay-base","aui-parse-content","aui-io-request","aui-loading-mask"]});AUI.add("aui-state-interaction",function(e){var h=e.Lang,d=h.isBoolean,c=h.isString,f=e.getClassName,i="state",j=f(i,"default"),g=f(i,"hover"),b=f(i,"active");var a=e.Component.create({NAME:"stateinteraction",NS:"StateInteraction",ATTRS:{active:{value:false},activeState:{value:true,validator:d},bubbleTarget:{value:null},classNames:{value:{}},"default":{value:false},defaultState:{value:true,validator:d},hover:{value:false},hoverState:{value:true,validator:d},node:{value:null}},EXTENDS:e.Plugin.Base,constructor:function(k){var m=k.host;var l=m;if(e.Widget&&m instanceof e.Widget){l=m.get("contentBox");}k.node=l;a.superclass.constructor.apply(this,arguments);},prototype:{initializer:function(){var k=this;var m=k.get("classNames.active");var l=k.get("classNames.default");var n=k.get("classNames.hover");k._CSS_STATES={active:c(m)?m:b,"default":c(l)?l:j,hover:c(n)?n:g};if(k.get("defaultState")){k.get("node").addClass(k._CSS_STATES["default"]);}k._createEvents();k._attachInteractionEvents();},_attachInteractionEvents:function(){var k=this;var l=k.get("node");l.on("click",k._fireEvents,k);l.on("mouseenter",e.rbind(k._fireEvents,k,"mouseover"));l.on("mouseleave",e.rbind(k._fireEvents,k,"mouseout"));k.after("activeChange",k._uiSetState);k.after("hoverChange",k._uiSetState);k.after("defaultChange",k._uiSetState);},_fireEvents:function(n,m){var k=this;var l=k.get("bubbleTarget");m=m||n.type;if(l){l.fire(m);}return k.fire(m);},_createEvents:function(){var k=this;var l=k.get("bubbleTarget");if(l){k.addTarget(l);}k.publish("click",{defaultFn:k._defClickFn,emitFacade:true});k.publish("mouseout",{defaultFn:k._defMouseOutFn,emitFacade:true});k.publish("mouseover",{defaultFn:k._defMouseOverFn,emitFacade:true});},_defClickFn:function(l){var k=this;k.set("active",!k.get("active"));},_defMouseOutFn:function(){var k=this;k.set("hover",false);},_defMouseOverFn:function(){var k=this;k.set("hover",true);},_uiSetState:function(m){var k=this;var l=m.attrName;if(k.get(l+"State")){var n="addClass";if(!m.newVal){n="removeClass";}k.get("node")[n](k._CSS_STATES[l]);}}}});e.namespace("Plugin").StateInteraction=a;},"1.5.2",{skinnable:false,requires:["aui-base","plugin"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("widget-child",function(c){var b=c.Lang;function a(){c.after(this._syncUIChild,this,"syncUI");c.after(this._bindUIChild,this,"bindUI");}a.ATTRS={selected:{value:0,validator:b.isNumber},index:{readOnly:true,getter:function(){var e=this.get("parent"),d=-1;if(e){d=e.indexOf(this);}return d;}},parent:{readOnly:true},depth:{readOnly:true,getter:function(){var e=this.get("parent"),d=this.get("root"),f=-1;while(e){f=(f+1);if(e==d){break;}e=e.get("parent");}return f;}},root:{readOnly:true,getter:function(){var d=function(h){var e=h.get("parent"),f=h.ROOT_TYPE,g=e;if(f){g=(e&&c.instanceOf(e,f));}return(g?d(e):h);};return d(this);}}};a.prototype={ROOT_TYPE:null,_getUIEventNode:function(){var d=this.get("root"),e;if(d){e=d.get("boundingBox");}return e;},next:function(f){var e=this.get("parent"),d;if(e){d=e.item((this.get("index")+1));}if(!d&&f){d=e.item(0);}return d;},previous:function(g){var f=this.get("parent"),d=this.get("index"),e;if(f&&d>0){e=f.item([(d-1)]);}if(!e&&g){e=f.item((f.size()-1));}return e;},remove:function(d){var e,f;if(b.isNumber(d)){f=c.WidgetParent.prototype.remove.apply(this,arguments);}else{e=this.get("parent");if(e){f=e.remove(this.get("index"));}}return f;},isRoot:function(){return(this==this.get("root"));},ancestor:function(f){var d=this.get("root"),e;if(this.get("depth")>f){e=this.get("parent");while(e!=d&&e.get("depth")>f){e=e.get("parent");}}return e;},_uiSetChildSelected:function(e){var f=this.get("boundingBox"),d=this.getClassName("selected");if(e===0){f.removeClass(d);}else{f.addClass(d);}},_afterChildSelectedChange:function(d){this._uiSetChildSelected(d.newVal);},_syncUIChild:function(){this._uiSetChildSelected(this.get("selected"));},_bindUIChild:function(){this.after("selectedChange",this._afterChildSelectedChange);}};c.WidgetChild=a;},"3.4.0",{requires:["base-build","widget"]});AUI.add("aui-button-item",function(u){var h=u.Lang,p=h.isString,k=u.getClassName,j="buttonitem",D="boundingBox",b="button",s="contentBox",w=".",v="handler",d="icon",a="iconNode",E="label",c="labelNode",C="only",o="reset",B="state",G="submit",t="title",r="type",e=k(j),l=k(j,d),F=k(j,E),y=k(j,d,E),n=k(j,d,C),i=k(j,E,C),m=k(d),g=new RegExp(m+"-([a-zA-Z0-9-]+)"),x='<button type="{0}"></button>',f='<span class="'+[l,m].join(" ")+'"></span>',q='<span class="'+F+'"></span>';var z=u.Component.create({NAME:j,AUGMENTS:[u.WidgetChild],ATTRS:{activeState:{value:false},classNames:{},defaultState:{},handler:{lazyAdd:false,value:null},hoverState:{},icon:{value:""},iconNode:{valueFn:function(){return u.Node.create(f);}},id:{valueFn:function(){return u.guid();}},label:{value:""},labelNode:{valueFn:function(){return u.Node.create(q);}},title:{setter:"_setTitle",value:false},type:{validator:function(A){return(A===b||A===G||A===o);},value:b}},HTML_PARSER:{iconNode:function(A){return A.one(w+l);},labelNode:function(A){return A.one(w+F);},icon:function(J){var H=J.one(w+l);if(H){this.set(a,H);var A=H.attr("class");var I=A.match(g);return I&&I[1];}},label:function(H){var A=H.one(w+F);if(A){this.set(c,A);return A.text();}}},constructor:function(I){var A=this;var H="button";if(I){if(p(I)){I={icon:I};}else{if(I.type){H=I.type;}}}A.BOUNDING_TEMPLATE=h.sub(x,[H]);z.superclass.constructor.call(A,I);},UI_ATTRS:[v,d,E,t,r],prototype:{BOUNDING_TEMPLATE:x,CONTENT_TEMPLATE:null,renderUI:function(){var A=this;A._renderStates();A._renderIconNode();A._renderLabelNode();},syncUI:function(){var A=this;var I=A.get("icon");var H=A.get("label");var J=A.get("title");if(I){A._uiSetIcon(I);}if(H){A._uiSetLabel(H);}if(J){A._uiSetTitle(J);}},_renderIconNode:function(){var A=this;A.get(s).append(A.get(a));},_renderLabelNode:function(){var A=this;A.get(s).append(A.get(c));},_getState:function(H,I){var A=this;var K=A.get(H);var J=K;if(I){K=I.get(H);if(!h.isUndefined(K)){J=K;}}return J;},_renderStates:function(K){var A=this;var J=A.get("parent");var I=A._getState("activeState",J);var M=A._getState("classNames",J);var H=A._getState("defaultState",J);var L=A._getState("hoverState",J);A.plug(u.Plugin.StateInteraction,{activeState:I,classNames:M,defaultState:H,hoverState:L});},_setTitle:function(H){var A=this;if(H===null){H=A.get("label");}else{if(H===false){H="";}}return String(H);},_syncChildrenStates:function(){var A=this;var K=A.get("icon");var I=A.get("label");var L=(K&&I);var M=(!K&&I);var J=(K&&!I);var H=A.get(D);H.toggleClass(y,L);H.toggleClass(n,J);H.toggleClass(i,M);},_uiSetHandler:function(N){var P=this;var M=N;var O=P.get("parent");var H=(O&&O._DEFAULT_CONTEXT)||P._DEFAULT_CONTEXT||P;var L="click";var K=P;var I;if(h.isObject(M)){var Q=M;M=Q.fn||M;H=Q.context||H;L=Q.type||L;I=Q.args;}if(h.isFunction(M)){var J=P._interactionHandle;if(J){J.detach();}var A=u.rbind.apply(u,[M,H,K].concat(I||[]));P._interactionHandle=P.on(L,function(){if(!P.get("disabled")){A.apply(this,arguments);}});}},_uiSetIcon:function(J){var A=this;var H=A.get(a);var I="show";if(!J){I="hide";}J=k(d,J);H.replaceClass(A._iconPrevVal,J);H[I]();A._syncChildrenStates();A._iconPrevVal=J;},_uiSetLabel:function(J){var A=this;var H=A.get(c);var I="show";if(!J){I="hide";}H.text(J);H[I]();A._syncChildrenStates();},_uiSetTitle:function(I){var A=this;var H=A.get(D);H.setAttribute(t,I);},_uiSetType:function(I){var A=this;var H=A.get(D);H.setAttribute(r,I);}}});u.ButtonItem=z;},"1.5.2",{skinnable:true,requires:["aui-base","aui-state-interaction","widget-child"]});AUI.add("aui-data-set",function(a){var c=a.Lang;var b=function(){b.superclass.constructor.apply(this,arguments);};b.NAME="dataset";b.ATTRS={keys:{getter:function(e){var d=this;return d.keys;}},first:{getter:function(){var d=this;var e=d.values;return e[0];}},includeFunctions:{value:false},items:{value:null,getter:function(){var d=this;return d.collection||{};}},last:{getter:function(){var d=this;var e=d.values;return e[e.length-1];}},getKey:{lazyAdd:false,value:null,getter:function(e){var d=this;return e||d.getKey;},setter:function(e){var d=this;if(c.isFunction(e)){d.getKey=e;}return d.getKey;}},values:{getter:function(e){var d=this;return d.values;},readOnly:true}};a.extend(b,a.Base,{initializer:function(){var d=this;d.collection={};d.keys=[];d.values=[];d.length=0;d.publish("add",{defaultFn:d._defaultAddFn});d.publish("clear",{defaultFn:d._defaultClearFn});d.publish("remove",{defaultFn:d._defaultRemoveFn});d.publish("replace",{defaultFn:d._defaultReplaceFn});d.publish("sort",{defaultFn:d._defaultSortFn});},add:function(e,g){var d=this;if(arguments.length==1){g=e;e=d.getKey(g);}if(!c.isNull(e)&&!c.isUndefined(e)){var h=d.collection[e];if(!c.isUndefined(h)){return d.replace(e,g);}}var f=d.length;d.fire("add",{index:f,attrName:e,item:g,newVal:g});},addAll:function(j){var d=this;var e=arguments;var h=e.length;if(h==1){e=j;}if(h>1||c.isArray(j)){h=e.length;for(var f=0;f<h;f++){d.add(e[f]);}}else{for(var f in j){var g=j[f];d.add(f,g);}}},clear:function(){var d=this;d.fire("clear");},clone:function(){var d=this;var j=new b();var h=d.keys;var e=d.values;var g=e.length;for(var f=0;f<g;f++){j.add(h[f],e[f]);}j.set("getKey",d.get("getKey"));return j;},contains:function(e){var d=this;return d.indexOf(e)>-1;},containsKey:function(e){var d=this;return !(c.isUndefined(d.collection[e]));},each:function(f,e){var d=this;return d._each(d.values,f,e);},eachKey:function(f,e){var d=this;var g=d.keys;return d._each(g,f,e);},filter:function(k,d){var n=this;var j=new b();j.set("getKey",n.get("getKey"));var h=n.collection;var p=n.keys;var m=n.values;d=d||n;var l=j.collection;var f=j.values;var e=m.length;var o;for(var g=0;g<e;g++){o=m[g];if(k.call(d,o,g,h)){j.add(p[g],o);}}j.length=f.length;return j;},filterBy:function(h,i,g,e){var d=this;if(c.isUndefined(i)||c.isNull(i)||((c.isArray(i)||c.isString(i))&&!i.length)){return d.clone();}i=d._generateRegEx(i,g,e);var f=a.bind(d._keyFilter,d,h,i);return d.filter(f);},find:function(f,e){var d=this;return a.Array.find(d.values,f,e);},findIndex:function(h,g,l){var d=this;var k=d.collection;var e=d.values;var j=d.length;l=l||0;for(var f=l;f<j;f++){if(h.call(g,e[f],f,k)){return f;}}return -1;},findIndexBy:function(h,i,j,g,e){var d=this;if(c.isUndefined(i)||c.isNull(i)||((c.isArray(i)||c.isString(i))&&!i.length)){return -1;}i=d._generateRegEx(i,g,e);var f=a.bind(d._keyFilter,d,h,i);return d.findIndex(f,null,j);},getKey:function(e){var d=this;return(e.get&&e.get("id"))||e.id;},indexOf:function(e){var d=this;return a.Array.indexOf(d.values,e);},indexOfKey:function(e){var d=this;return a.Array.indexOf(d.keys,e);},insert:function(e,f,g){var d=this;if(arguments.length==2){g=arguments[1];f=d.getKey(g);}if(d.containsKey(f)){d.removeKey(f);}d.fire("add",{index:e,attrName:f,item:g,newVal:g});},invoke:function(l,f){var d=this;var e=d.values;var j=e.length;if(!f){f=[];}else{f=[].concat(f);}for(var g=0;g<j;g++){var h=e[g];var k=h&&h[l];if(c.isFunction(k)){k.apply(h,f);}}return d;},item:function(f){var d=this;var g;if(c.isNumber(f)){var e=d.values;g=e[f];}else{g=d.collection[f];}return g;},keySort:function(f,e){var d=this;d.fire("sort",{direction:f,fn:e||d._keySorter,type:"key"});},remove:function(f){var d=this;var e=d.indexOf(f);return d.removeAt(e);},removeAt:function(e){var d=this;if(e<d.length&&e>=0){var g=d.values[e];var f=d.keys[e];d.fire("remove",{index:e,attrName:f,item:g,prevVal:g});}},removeKey:function(f){var d=this;var e=d.indexOfKey(f);return d.removeAt(e);},replace:function(f,g){var d=this;if(arguments.length==1){g=f;f=d.getKey(g);}var h=d.collection[f];if(c.isUndefined(f)||c.isNull(f)||c.isUndefined(h)){return d.add(f,g);}var e=d.indexOfKey(f);d.fire("replace",{attrName:f,index:e,item:g,prevVal:h,newVal:g});},size:function(){var d=this;return d.length;},slice:function(g,e){var d=this;var f=d.values;return f.slice.apply(f,arguments);},sort:function(f,e){var d=this;d.fire("sort",{direction:f,fn:e,type:"value"});},_defaultAddFn:function(g){var d=this;var f=g.attrName;var h=g.item;var e=g.index;if(!c.isNull(f)&&!c.isUndefined(f)){if(d.get("includeFunctions")||!c.isFunction(h)){d.collection[f]=h;}}d.keys.splice(e,0,f);d.values.splice(e,0,h);++d.length;},_defaultClearFn:function(e){var d=this;d.collection={};d.keys=[];d.values=[];d.length=0;},_defaultRemoveFn:function(h){var d=this;var e=h.index;var i=h.item;var f=h.attrName;var j=d.collection;var g=d.keys;d.values.splice(e,1);if(!c.isUndefined(f)){delete j[f];}g.splice(e,1);d.length--;},_defaultReplaceFn:function(f){var d=this;var e=f.attrName;var g=f.item;d.collection[e]=g;},_defaultSortFn:function(e){var d=this;d._sortBy(e.type,e.direction,e.fn);},_each:function(e,j,h){var d=this;var f=e.slice(0);var k=f.length;h=h||d;for(var g=0;g<k;g++){if(j.call(h,f[g],g,f)===false){return false;}}return true;},_generateRegEx:function(i,h,f){var e=this;if(!(i instanceof RegExp)){i=String(i);var d=[];if(h!==false){d.push("^");}d.push(i);var g;if(!f){g="i";}i=new RegExp(d.join(""),g);}return i;},_keyFilter:function(f,h,g,e,i){var d=this;return g&&h.test(g[f]);},_keySorter:function(h,f){var e=this;var g=String(h).toLowerCase();var d=String(f).toLowerCase();var i=0;if(g>d){i=1;}else{if(g<d){i=-1;}}return i;},_sortBy:function(n,j,h){var p=this;var k=1;var g=[];var r=p.keys;var o=p.values;var d=o.length;h=h||a.Array.numericSort;if(String(j).toLowerCase()=="desc"){k=-1;}for(var e=0;e<d;e++){g.push({key:r[e],value:o[e],index:e});}g.sort(function(s,i){var t=h(s[n],i[n])*k;if(t===0){t=1;if(s.index<i.index){t=-1;}}return t;});d=g.length;var f={};for(var e=0;
e<d;e++){var q=g[e];var m=q.key;var l=q.value;f[m]=l;r[e]=m;o[e]=l;}p.collection=f;}});a.DataSet=b;},"1.5.2",{requires:["oop","collection","base"],skinnable:false});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("widget-parent",function(e){var c=e.Lang,d="rendered",b="boundingBox";function a(f){this.publish("addChild",{defaultTargetOnly:true,defaultFn:this._defAddChildFn});this.publish("removeChild",{defaultTargetOnly:true,defaultFn:this._defRemoveChildFn});this._items=[];var g,h;if(f&&f.children){g=f.children;h=this.after("initializedChange",function(i){this._add(g);h.detach();});}e.after(this._renderChildren,this,"renderUI");e.after(this._bindUIParent,this,"bindUI");this.after("selectionChange",this._afterSelectionChange);this.after("selectedChange",this._afterParentSelectedChange);this.after("activeDescendantChange",this._afterActiveDescendantChange);this._hDestroyChild=this.after("*:destroy",this._afterDestroyChild);this.after("*:focusedChange",this._updateActiveDescendant);}a.ATTRS={defaultChildType:{setter:function(h){var f=e.Attribute.INVALID_VALUE,g=c.isString(h)?e[h]:h;if(c.isFunction(g)){f=g;}return f;}},activeDescendant:{readOnly:true},multiple:{value:false,validator:c.isBoolean,writeOnce:true,getter:function(g){var f=this.get("root");return(f&&f!=this)?f.get("multiple"):g;}},selection:{readOnly:true,setter:"_setSelection",getter:function(g){var f=c.isArray(g)?(new e.ArrayList(g)):g;return f;}},selected:{setter:function(g){var f=g;if(g===1&&!this.get("multiple")){f=e.Attribute.INVALID_VALUE;}return f;}}};a.prototype={destructor:function(){this._destroyChildren();},_afterDestroyChild:function(f){var g=f.target;if(g.get("parent")==this){g.remove();}},_afterSelectionChange:function(h){if(h.target==this&&h.src!=this){var f=h.newVal,g=0;if(f){g=2;if(e.instanceOf(f,e.ArrayList)&&(f.size()===this.size())){g=1;}}this.set("selected",g,{src:this});}},_afterActiveDescendantChange:function(g){var f=this.get("parent");if(f){f._set("activeDescendant",g.newVal);}},_afterParentSelectedChange:function(f){var g=f.newVal;if(this==f.target&&f.src!=this&&(g===0||g===1)){this.each(function(h){h.set("selected",g,{src:this});},this);}},_setSelection:function(h){var g=null,f;if(this.get("multiple")&&!this.isEmpty()){f=[];this.each(function(i){if(i.get("selected")>0){f.push(i);}});if(f.length>0){g=f;}}else{if(h.get("selected")>0){g=h;}}return g;},_updateSelection:function(g){var h=g.target,f;if(h.get("parent")==this){if(g.src!="_updateSelection"){f=this.get("selection");if(!this.get("multiple")&&f&&g.newVal>0){f.set("selected",0,{src:"_updateSelection"});}this._set("selection",h);}if(g.src==this){this._set("selection",h,{src:this});}}},_updateActiveDescendant:function(f){var g=(f.newVal===true)?f.target:null;this._set("activeDescendant",g);},_createChild:function(f){var k=this.get("defaultChildType"),h=f.childType||f.type,j,g,i;if(h){g=c.isString(h)?e[h]:h;}if(c.isFunction(g)){i=g;}else{if(k){i=k;}}if(i){j=new i(f);}else{e.error("Could not create a child instance because its constructor is either undefined or invalid.");}return j;},_defAddChildFn:function(h){var i=h.child,f=h.index,g=this._items;if(i.get("parent")){i.remove();}if(c.isNumber(f)){g.splice(f,0,i);}else{g.push(i);}i._set("parent",this);i.addTarget(this);h.index=i.get("index");i.after("selectedChange",e.bind(this._updateSelection,this));},_defRemoveChildFn:function(h){var i=h.child,f=h.index,g=this._items;if(i.get("focused")){i.set("focused",false);}if(i.get("selected")){i.set("selected",0);}g.splice(f,1);i.removeTarget(this);i._oldParent=i.get("parent");i._set("parent",null);},_add:function(j,f){var g,i,h;if(c.isArray(j)){g=[];e.each(j,function(m,l){i=this._add(m,(f+l));if(i){g.push(i);}},this);if(g.length>0){h=g;}}else{if(e.instanceOf(j,e.Widget)){i=j;}else{i=this._createChild(j);}if(i&&this.fire("addChild",{child:i,index:f})){h=i;}}return h;},add:function(){var g=this._add.apply(this,arguments),f=g?(c.isArray(g)?g:[g]):[];return(new e.ArrayList(f));},remove:function(f){var h=this._items[f],g;if(h&&this.fire("removeChild",{child:h,index:f})){g=h;}return g;},removeAll:function(){var f=[],g;e.each(this._items.concat(),function(){g=this.remove(0);if(g){f.push(g);}},this);return(new e.ArrayList(f));},selectChild:function(f){this.item(f).set("selected",1);},selectAll:function(){this.set("selected",1);},deselectAll:function(){this.set("selected",0);},_uiAddChild:function(k,f){k.render(f);var i=k.get("boundingBox"),h,j=k.next(false),g;if(j&&j.get(d)){h=j.get(b);h.insert(i,"before");}else{g=k.previous(false);if(g&&g.get(d)){h=g.get(b);h.insert(i,"after");}else{if(!f.contains(i)){f.appendChild(i);}}}},_uiRemoveChild:function(f){f.get("boundingBox").remove();},_afterAddChild:function(f){var g=f.child;if(g.get("parent")==this){this._uiAddChild(g,this._childrenContainer);}},_afterRemoveChild:function(f){var g=f.child;if(g._oldParent==this){this._uiRemoveChild(g);}},_bindUIParent:function(){this.after("addChild",this._afterAddChild);this.after("removeChild",this._afterRemoveChild);},_renderChildren:function(){var f=this._childrenContainer||this.get("contentBox");this._childrenContainer=f;this.each(function(g){g.render(f);});},_destroyChildren:function(){this._hDestroyChild.detach();this.each(function(f){f.destroy();});}};e.augment(a,e.ArrayList);e.WidgetParent=a;},"3.4.0",{requires:["base-build","arraylist","widget"]});AUI.add("aui-toolbar",function(n){var e=n.Lang,l=e.isString,u="horizontal",h="toolbar",r="orientation",s="toolbarspacer",o="vertical",i=n.getClassName,g=i(h,"first"),m=i(h,u),k=i(h,"item"),f=i(h,"item","content"),a=i(h,"last"),c=i(h,o),q=function(w){return(w instanceof n.ButtonItem);},p=function(w){return(w instanceof n.ToolbarSpacer);},j="<span></span>";var b=n.Component.create({NAME:h,ATTRS:{activeState:{},defaultState:{},hoverState:{},defaultChildType:{value:"ButtonItem"},orientation:{value:u,validator:function(v){return l(v)&&(v===u||v===o);}}},UI_ATTRS:[r],prototype:{BOUNDING_TEMPLATE:j,CONTENT_TEMPLATE:j,initializer:function(){var v=this;n.Do.before(v._addByIconId,v,"add");},bindUI:function(){var v=this;v.on("addChild",v._onAddButton);v.after("addChild",v._afterAddButton);v.after("removeChild",v._afterRemoveButton);},syncUI:function(){var v=this;var y=v.size()-1;var x=-1;var w=-1;v.each(function(A,z,B){var C=A.get("boundingBox");if(q(A)){if(x==-1){x=z;}else{w=z;}C.toggleClass(g,z==x);C.toggleClass(a,z==y);C.addClass(k);}else{if(z==x+1){w=x;}if(w!=-1){B.item(w).get("boundingBox").toggleClass(a,true);}x=-1;w=-1;}});},_addByIconId:function(w){var v=this;if(e.isString(w)){var x={icon:w};return new n.Do.AlterArgs(null,[x]);}},_afterAddButton:function(w){var v=this;v.syncUI();},_afterRemoveButton:function(w){var v=this;w.child.destroy();v.syncUI();},_uiSetOrientation:function(y){var v=this;var x=v.get("boundingBox");var w=(y==u);x.toggleClass(m,w);x.toggleClass(c,!w);}}});var t=n.Component.create({NAME:s,AUGMENTS:[n.WidgetChild],ATTRS:{},prototype:{BOUNDING_TEMPLATE:j,CONTENT_TEMPLATE:null}});n.ToolbarSpacer=t;var d=function(){var v=this;v._CHILD_MAP=new n.DataSet();v.on("addChild",v._onAddChildById);v.after("addChild",v._afterAddChildById);v.after("removeChild",v._afterRemoveChildById);n.Do.before(v._findById,v,"item");n.Do.before(v._findById,v,"remove");};d.prototype={_afterAddChildById:function(w){var v=this;var x=w.child.get("id");v._CHILD_MAP.insert(w.index,x,w.child);},_afterRemoveChildById:function(w){var v=this;var x=w.child.get("id");v._CHILD_MAP.removeKey(x);},_findById:function(x){var v=this;if(e.isString(x)){var w=v._CHILD_MAP.indexOfKey(x);return new n.Do.AlterArgs(null,[w]);}},_onAddChildById:function(w){var v=this;var x=w.child.get("id");if(v._CHILD_MAP.indexOfKey(x)>-1){w.preventDefault();}}};n.Toolbar=n.Component.build(h,b,[n.WidgetParent,d],{dynamic:false});},"1.5.2",{requires:["aui-base","aui-button-item","aui-data-set","widget-parent"],skinnable:true});AUI.add("aui-aria",function(p){var e=p.Lang,k=e.isBoolean,a=e.isFunction,l=e.isObject,m=e.isString,c="attributeValueFormat",o="attributes",n="aria",q="aria-",b="attributeNode",v="boundingBox",u="host",f="role",r="roleName",g="roleNode",d="validateW3C",j="Change",w="",i=/([^a-z])/ig,t="aria:processAttribute",s=p.cached(function(x){return x.replace(i,function(){return w;}).toLowerCase();});var h=p.Component.create({NAME:n,NS:n,ATTRS:{attributes:{value:{},validator:l},attributeValueFormat:{value:function(x){return x;},validator:a},attributeNode:{writeOnce:true,setter:p.one,valueFn:function(){return this.get(u).get(v);}},roleName:{valueFn:function(){var y=this;var z=y.get(u);var x=s(z.constructor.NAME||w);return(y.isValidRole(x)?x:w);},validator:m},roleNode:{writeOnce:true,setter:p.one,valueFn:function(){return this.get(u).get(v);}},validateW3C:{value:true,validator:k}},EXTENDS:p.Plugin.Base,prototype:{initializer:function(){var x=this;x.publish(t,{defaultFn:x._defProcessFn,queuable:false,emitFacade:true,bubbles:true,prefix:n});x._uiSetRoleName(x.get(r));x.after("roleNameChange",x._afterRoleNameChange);x._bindHostAttributes();},isValidAttribute:function(y){var x=this;return(x.get(d)?p.Plugin.Aria.W3C_ATTRIBUTES[y]:true);},isValidRole:function(y){var x=this;return(x.get(d)?p.Plugin.Aria.W3C_ROLES[y]:true);},setAttribute:function(y,A,z){var x=this;if(x.isValidAttribute(y)){(z||x.get(b)).set(q+y,A);return true;}return false;},setAttributes:function(y){var x=this;p.Array.each(y,function(B,A,z){x.setAttribute(B.name,B.value,B.node);});},setRole:function(y,z){var x=this;if(x.isValidRole(y)){(z||x.get(g)).set(f,y);return true;}return false;},setRoles:function(y){var x=this;p.Array.each(y,function(B,z,A){x.setRole(B.name,B.node);});},_afterHostAttributeChange:function(y){var x=this;x._handleProcessAttribute(y);},_afterRoleNameChange:function(y){var x=this;x._uiSetRoleName(y.newVal);},_bindHostAttributes:function(){var x=this;var y=x.get(o);p.each(y,function(A,B){var z=x._getAriaAttribute(A,B);x._handleProcessAttribute({aria:z});x.afterHostEvent(B+j,function(C){C.aria=z;x._afterHostAttributeChange(C);});});},_defProcessFn:function(y){var x=this;x._setAttribute(y.aria);},_getAriaAttribute:function(y,z){var x=this;var A=x.get(c);var B={};if(m(y)){B=p.merge(B,{ariaName:y,attrName:z,format:A,node:null});}else{if(l(y)){B=p.mix(y,{ariaName:w,attrName:z,format:A,node:null});}}return B;},_handleProcessAttribute:function(y){var x=this;x.fire(t,{aria:y.aria});},_setAttribute:function(y){var x=this;var z=x.get(u);var B=z.get(y.attrName);var A=y.node;if(a(A)){A=A.apply(x,[y]);}x.setAttribute(y.ariaName,y.format.apply(x,[B,y]),A);},_uiSetRoleName:function(y){var x=this;x.setRole(y);}}});p.Plugin.Aria=h;p.Plugin.Aria.W3C_ROLES={"alert":1,"alertdialog":1,"application":1,"article":1,"banner":1,"button":1,"checkbox":1,"columnheader":1,"combobox":1,"command":1,"complementary":1,"composite":1,"contentinfo":1,"definition":1,"dialog":1,"directory":1,"document":1,"form":1,"grid":1,"gridcell":1,"group":1,"heading":1,"img":1,"input":1,"landmark":1,"link":1,"list":1,"listbox":1,"listitem":1,"log":1,"main":1,"marquee":1,"math":1,"menu":1,"menubar":1,"menuitem":1,"menuitemcheckbox":1,"menuitemradio":1,"navigation":1,"note":1,"option":1,"presentation":1,"progressbar":1,"radio":1,"radiogroup":1,"range":1,"region":1,"roletype":1,"row":1,"rowheader":1,"scrollbar":1,"search":1,"section":1,"sectionhead":1,"select":1,"separator":1,"slider":1,"spinbutton":1,"status":1,"structure":1,"tab":1,"tablist":1,"tabpanel":1,"textbox":1,"timer":1,"toolbar":1,"tooltip":1,"tree":1,"treegrid":1,"treeitem":1,"widget":1,"window":1};p.Plugin.Aria.W3C_ATTRIBUTES={"activedescendant":1,"atomic":1,"autocomplete":1,"busy":1,"checked":1,"controls":1,"describedby":1,"disabled":1,"dropeffect":1,"expanded":1,"flowto":1,"grabbed":1,"haspopup":1,"hidden":1,"invalid":1,"label":1,"labelledby":1,"level":1,"live":1,"multiline":1,"multiselectable":1,"orientation":1,"owns":1,"posinset":1,"pressed":1,"readonly":1,"relevant":1,"required":1,"selected":1,"setsize":1,"sort":1,"valuemax":1,"valuemin":1,"valuenow":1,"valuetext":1};},"1.5.2",{requires:["aui-base","plugin"],skinnable:false});AUI.add("aui-panel",function(v){var h=v.Lang,q=h.isArray,n=h.isBoolean,C=v.WidgetStdMod,c=v.config.doc,D="boundingBox",e="collapse",l="collapsed",t="collapsible",f="icon",m="id",x="minus",b="panel",d="plus",u="title",s="icons",r="useARIA",z="visible",E="",j=v.getClassName,k=j("helper","clearfix"),g=j(b,l),p=j(b),B=j(b,"hd","text"),a=j(b,"icons"),i={body:"bd",footer:"ft",header:"hd"},w=c.createTextNode(""),o='<span class="'+B+'"></span>';var y=function(){};y.ATTRS={bodyContent:{value:E},collapsed:{value:false,validator:n},collapsible:{value:false,validator:n},headerContent:{value:E},title:{value:"",validator:function(A){return h.isString(A)||n(A);}},icons:{value:[],validator:q},strings:{value:{toggle:"Toggle collapse"}},useARIA:{value:true}};y.prototype={initializer:function(F){var A=this;A.after("collapsedChange",A._afterCollapsedChange);A.after("render",A._afterPanelRender);A.after("titleChange",A._afterTitleChange);},syncUI:function(){var A=this;if(A.get(r)){A.plug(v.Plugin.Aria,{after:{processAttribute:function(J){var F=this;var I=F.get("host");if(J.aria.attrName==l){var K=I.get(l);if(I.icons){var G=I.icons;var H=G.item(e);if(H){F.setAttribute("pressed",K,H.get(D));}}F.setAttribute("hidden",K,I.bodyNode);J.halt();}}},attributes:{collapsed:"hidden"}});}},collapse:function(){var A=this;A.set(l,true);},expand:function(){var A=this;A.set(l,false);},toggle:function(){var A=this;A.set(z,!A.get(z));},toggleCollapse:function(){var A=this;if(A.get(l)){A.expand();}else{A.collapse();}},_addPanelClass:function(K){var A=this;var J=A[K+"Node"];if(J){var H=i[K];var I=j(b,H);var G=A.name;var F=j(G,H);J.addClass(I);J.addClass(F);}},_renderIconButtons:function(){var F=this;var G=F.get(s);if(F.get(t)){var H=F.get(l)?d:x;G.unshift({icon:H,id:e,handler:{fn:F.toggleCollapse,context:F},title:F.get("strings").toggle});}F.icons=new v.Toolbar({children:G}).render(F.headerNode);var A=F.icons.get(D);A.addClass(a);F.setStdModContent(C.HEADER,A,C.BEFORE);},_renderHeaderText:function(){var A=this;A.headerTextNode=v.Node.create(o).addClass(B);if(!A.get(u)){A.set(u,A.headerNode.html());}A.setStdModContent(C.HEADER,E);A._syncTitleUI();},_syncCollapsedUI:function(){var A=this;if(A.get(t)){var I=A.bodyNode;var F=A.get(D);var J=A.get(l);if(A.icons){var G=A.icons;var H=G.item(e);if(H){H.set(f,J?d:x);}}if(J){I.hide();F.addClass(g);}else{I.show();F.removeClass(g);}}},_syncTitleUI:function(){var A=this;var F=A.headerTextNode;var G=A.get(u);F.html(G);A.setStdModContent(C.HEADER,F,C.BEFORE);},_afterCollapsedChange:function(F){var A=this;A._syncCollapsedUI();},_afterPanelRender:function(F){var A=this;A.headerNode.addClass(k);A._addPanelClass("body");A._addPanelClass("footer");A._addPanelClass("header");A._renderHeaderText();A._renderIconButtons();A.get("contentBox").setAttribute("role","tablist");A._syncCollapsedUI();A._setDefaultARIAValues();},_afterTitleChange:function(F){var A=this;A._syncTitleUI();},_setDefaultARIAValues:function(){var A=this;if(!A.get(r)){return;}var F=A.headerNode;var L=F.generateID();var I=A.bodyNode;var J=I.generateID();var G=[{name:"tab",node:F},{name:"tabpanel",node:I}];A.aria.setRoles(G);var K=[{name:"controls",value:J,node:F},{name:"labelledby",value:L,node:I},{name:"describedby",value:L,node:I}];if(A.icons){var H=A.icons.item(e);if(H){K.push({name:"controls",value:J,node:H.get(D)});}}A.aria.setAttributes(K);}};v.Panel=v.Component.build(b,v.Component,[v.WidgetStdMod,y]);},"1.5.2",{requires:["aui-component","widget-stdmod","aui-toolbar","aui-aria"],skinnable:true});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("dd-ddm-base",function(b){var a=function(){a.superclass.constructor.apply(this,arguments);};a.NAME="ddm";a.ATTRS={dragCursor:{value:"move"},clickPixelThresh:{value:3},clickTimeThresh:{value:1000},throttleTime:{value:-1},dragMode:{value:"point",setter:function(c){this._setDragMode(c);return c;}}};b.extend(a,b.Base,{_createPG:function(){},_active:null,_setDragMode:function(c){if(c===null){c=b.DD.DDM.get("dragMode");}switch(c){case 1:case"intersect":return 1;case 2:case"strict":return 2;case 0:case"point":return 0;}return 0;},CSS_PREFIX:b.ClassNameManager.getClassName("dd"),_activateTargets:function(){},_drags:[],activeDrag:false,_regDrag:function(c){if(this.getDrag(c.get("node"))){return false;}if(!this._active){this._setupListeners();}this._drags.push(c);return true;},_unregDrag:function(e){var c=[];b.each(this._drags,function(f,d){if(f!==e){c[c.length]=f;}});this._drags=c;},_setupListeners:function(){this._createPG();this._active=true;var c=b.one(b.config.doc);c.on("mousemove",b.throttle(b.bind(this._move,this),this.get("throttleTime")));c.on("mouseup",b.bind(this._end,this));},_start:function(){this.fire("ddm:start");this._startDrag();},_startDrag:function(){},_endDrag:function(){},_dropMove:function(){},_end:function(){if(this.activeDrag){this._endDrag();this.fire("ddm:end");this.activeDrag.end.call(this.activeDrag);this.activeDrag=null;}},stopDrag:function(){if(this.activeDrag){this._end();}return this;},_move:function(c){if(this.activeDrag){this.activeDrag._move.call(this.activeDrag,c);this._dropMove();}},cssSizestoObject:function(d){var c=d.split(" ");switch(c.length){case 1:c[1]=c[2]=c[3]=c[0];break;case 2:c[2]=c[0];c[3]=c[1];break;case 3:c[3]=c[1];break;}return{top:parseInt(c[0],10),right:parseInt(c[1],10),bottom:parseInt(c[2],10),left:parseInt(c[3],10)};},getDrag:function(d){var c=false,e=b.one(d);if(e instanceof b.Node){b.each(this._drags,function(g,f){if(e.compareTo(g.get("node"))){c=g;}});}return c;},swapPosition:function(d,c){d=b.DD.DDM.getNode(d);c=b.DD.DDM.getNode(c);var f=d.getXY(),e=c.getXY();d.setXY(e);c.setXY(f);return d;},getNode:function(c){if(c&&c.get){if(b.Widget&&(c instanceof b.Widget)){c=c.get("boundingBox");}else{c=c.get("node");}}else{c=b.one(c);}return c;},swapNode:function(e,c){e=b.DD.DDM.getNode(e);c=b.DD.DDM.getNode(c);var f=c.get("parentNode"),d=c.get("nextSibling");if(d==e){f.insertBefore(e,c);}else{if(c==e.get("nextSibling")){f.insertBefore(c,e);}else{e.get("parentNode").replaceChild(c,e);f.insertBefore(e,d);}}return e;}});b.namespace("DD");b.DD.DDM=new a();},"3.4.0",{skinnable:false,requires:["node","base","yui-throttle","classnamemanager"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("dd-drag",function(d){var e=d.DD.DDM,r="node",g="dragging",m="dragNode",c="offsetHeight",k="offsetWidth",h="drag:mouseDown",b="drag:afterMouseDown",f="drag:removeHandle",l="drag:addHandle",p="drag:removeInvalid",q="drag:addInvalid",j="drag:start",i="drag:end",n="drag:drag",o="drag:align",a=function(t){this._lazyAddAttrs=false;a.superclass.constructor.apply(this,arguments);var s=e._regDrag(this);if(!s){d.error("Failed to register node, already in use: "+t.node);}};a.NAME="drag";a.START_EVENT="mousedown";a.ATTRS={node:{setter:function(s){if(this._canDrag(s)){return s;}var t=d.one(s);if(!t){d.error("DD.Drag: Invalid Node Given: "+s);}return t;}},dragNode:{setter:function(s){if(this._canDrag(s)){return s;}var t=d.one(s);if(!t){d.error("DD.Drag: Invalid dragNode Given: "+s);}return t;}},offsetNode:{value:true},startCentered:{value:false},clickPixelThresh:{value:e.get("clickPixelThresh")},clickTimeThresh:{value:e.get("clickTimeThresh")},lock:{value:false,setter:function(s){if(s){this.get(r).addClass(e.CSS_PREFIX+"-locked");}else{this.get(r).removeClass(e.CSS_PREFIX+"-locked");}return s;}},data:{value:false},move:{value:true},useShim:{value:true},activeHandle:{value:false},primaryButtonOnly:{value:true},dragging:{value:false},parent:{value:false},target:{value:false,setter:function(s){this._handleTarget(s);return s;}},dragMode:{value:null,setter:function(s){return e._setDragMode(s);}},groups:{value:["default"],getter:function(){if(!this._groups){this._groups={};}var s=[];d.each(this._groups,function(u,t){s[s.length]=t;});return s;},setter:function(s){this._groups={};d.each(s,function(u,t){this._groups[u]=true;},this);return s;}},handles:{value:null,setter:function(s){if(s){this._handles={};d.each(s,function(u,t){var w=u;if(u instanceof d.Node||u instanceof d.NodeList){w=u._yuid;}this._handles[w]=u;},this);}else{this._handles=null;}return s;}},bubbles:{setter:function(s){this.addTarget(s);return s;}},haltDown:{value:true}};d.extend(a,d.Base,{_canDrag:function(s){if(s&&s.setXY&&s.getXY&&s.test&&s.contains){return true;}return false;},_bubbleTargets:d.DD.DDM,addToGroup:function(s){this._groups[s]=true;e._activateTargets();return this;},removeFromGroup:function(s){delete this._groups[s];e._activateTargets();return this;},target:null,_handleTarget:function(s){if(d.DD.Drop){if(s===false){if(this.target){e._unregTarget(this.target);this.target=null;}return false;}else{if(!d.Lang.isObject(s)){s={};}s.bubbleTargets=("bubbleTargets" in s)?s.bubbleTargets:d.Object.values(this._yuievt.targets);s.node=this.get(r);s.groups=s.groups||this.get("groups");this.target=new d.DD.Drop(s);}}else{return false;}},_groups:null,_createEvents:function(){this.publish(h,{defaultFn:this._defMouseDownFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(o,{defaultFn:this._defAlignFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(n,{defaultFn:this._defDragFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(i,{defaultFn:this._defEndFn,preventedFn:this._prevEndFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});var s=[b,f,l,p,q,j,"drag:drophit","drag:dropmiss","drag:over","drag:enter","drag:exit"];d.each(s,function(u,t){this.publish(u,{type:u,emitFacade:true,bubbles:true,preventable:false,queuable:false,prefix:"drag"});},this);},_ev_md:null,_startTime:null,_endTime:null,_handles:null,_invalids:null,_invalidsDefault:{"textarea":true,"input":true,"a":true,"button":true,"select":true},_dragThreshMet:null,_fromTimeout:null,_clickTimeout:null,deltaXY:null,startXY:null,nodeXY:null,lastXY:null,actXY:null,realXY:null,mouseXY:null,region:null,_handleMouseUp:function(s){this.fire("drag:mouseup");this._fixIEMouseUp();if(e.activeDrag){e._end();}},_fixDragStart:function(s){s.preventDefault();},_ieSelectFix:function(){return false;},_ieSelectBack:null,_fixIEMouseDown:function(s){if(d.UA.ie){this._ieSelectBack=d.config.doc.body.onselectstart;d.config.doc.body.onselectstart=this._ieSelectFix;}},_fixIEMouseUp:function(){if(d.UA.ie){d.config.doc.body.onselectstart=this._ieSelectBack;}},_handleMouseDownEvent:function(s){this.fire(h,{ev:s});},_defMouseDownFn:function(t){var s=t.ev;this._dragThreshMet=false;this._ev_md=s;if(this.get("primaryButtonOnly")&&s.button>1){return false;}if(this.validClick(s)){this._fixIEMouseDown(s);if(this.get("haltDown")){s.halt();}else{s.preventDefault();}this._setStartPosition([s.pageX,s.pageY]);e.activeDrag=this;this._clickTimeout=d.later(this.get("clickTimeThresh"),this,this._timeoutCheck);}this.fire(b,{ev:s});},validClick:function(w){var v=false,z=false,s=w.target,u=null,t=null,x=null,y=false;if(this._handles){d.each(this._handles,function(A,B){if(A instanceof d.Node||A instanceof d.NodeList){if(!v){x=A;if(x instanceof d.Node){x=new d.NodeList(A._node);}x.each(function(C){if(C.contains(s)){v=true;}});}}else{if(d.Lang.isString(B)){if(s.test(B+", "+B+" *")&&!u){u=B;v=true;}}}});}else{z=this.get(r);if(z.contains(s)||z.compareTo(s)){v=true;}}if(v){if(this._invalids){d.each(this._invalids,function(A,B){if(d.Lang.isString(B)){if(s.test(B+", "+B+" *")){v=false;}}});}}if(v){if(u){t=w.currentTarget.all(u);y=false;t.each(function(B,A){if((B.contains(s)||B.compareTo(s))&&!y){y=true;this.set("activeHandle",B);}},this);}else{this.set("activeHandle",this.get(r));}}return v;},_setStartPosition:function(s){this.startXY=s;this.nodeXY=this.lastXY=this.realXY=this.get(r).getXY();if(this.get("offsetNode")){this.deltaXY=[(this.startXY[0]-this.nodeXY[0]),(this.startXY[1]-this.nodeXY[1])];}else{this.deltaXY=[0,0];}},_timeoutCheck:function(){if(!this.get("lock")&&!this._dragThreshMet&&this._ev_md){this._fromTimeout=this._dragThreshMet=true;this.start();this._alignNode([this._ev_md.pageX,this._ev_md.pageY],true);}},removeHandle:function(t){var s=t;if(t instanceof d.Node||t instanceof d.NodeList){s=t._yuid;}if(this._handles[s]){delete this._handles[s];this.fire(f,{handle:t});}return this;},addHandle:function(t){if(!this._handles){this._handles={};}var s=t;
if(t instanceof d.Node||t instanceof d.NodeList){s=t._yuid;}this._handles[s]=t;this.fire(l,{handle:t});return this;},removeInvalid:function(s){if(this._invalids[s]){this._invalids[s]=null;delete this._invalids[s];this.fire(p,{handle:s});}return this;},addInvalid:function(s){if(d.Lang.isString(s)){this._invalids[s]=true;this.fire(q,{handle:s});}return this;},initializer:function(s){this.get(r).dd=this;if(!this.get(r).get("id")){var t=d.stamp(this.get(r));this.get(r).set("id",t);}this.actXY=[];this._invalids=d.clone(this._invalidsDefault,true);this._createEvents();if(!this.get(m)){this.set(m,this.get(r));}this.on("initializedChange",d.bind(this._prep,this));this.set("groups",this.get("groups"));},_prep:function(){this._dragThreshMet=false;var s=this.get(r);s.addClass(e.CSS_PREFIX+"-draggable");s.on(a.START_EVENT,d.bind(this._handleMouseDownEvent,this));s.on("mouseup",d.bind(this._handleMouseUp,this));s.on("dragstart",d.bind(this._fixDragStart,this));},_unprep:function(){var s=this.get(r);s.removeClass(e.CSS_PREFIX+"-draggable");s.detachAll("mouseup");s.detachAll("dragstart");s.detachAll(a.START_EVENT);},start:function(){if(!this.get("lock")&&!this.get(g)){var t=this.get(r),s,u,v;this._startTime=(new Date()).getTime();e._start();t.addClass(e.CSS_PREFIX+"-dragging");this.fire(j,{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime});t=this.get(m);v=this.nodeXY;s=t.get(k);u=t.get(c);if(this.get("startCentered")){this._setStartPosition([v[0]+(s/2),v[1]+(u/2)]);}this.region={"0":v[0],"1":v[1],area:0,top:v[1],right:v[0]+s,bottom:v[1]+u,left:v[0]};this.set(g,true);}return this;},end:function(){this._endTime=(new Date()).getTime();if(this._clickTimeout){this._clickTimeout.cancel();}this._dragThreshMet=this._fromTimeout=false;if(!this.get("lock")&&this.get(g)){this.fire(i,{pageX:this.lastXY[0],pageY:this.lastXY[1],startTime:this._startTime,endTime:this._endTime});}this.get(r).removeClass(e.CSS_PREFIX+"-dragging");this.set(g,false);this.deltaXY=[0,0];return this;},_defEndFn:function(s){this._fixIEMouseUp();this._ev_md=null;},_prevEndFn:function(s){this._fixIEMouseUp();this.get(m).setXY(this.nodeXY);this._ev_md=null;this.region=null;},_align:function(s){this.fire(o,{pageX:s[0],pageY:s[1]});},_defAlignFn:function(s){this.actXY=[s.pageX-this.deltaXY[0],s.pageY-this.deltaXY[1]];},_alignNode:function(s){this._align(s);this._moveNode();},_moveNode:function(s){var t=[],u=[],w=this.nodeXY,v=this.actXY;t[0]=(v[0]-this.lastXY[0]);t[1]=(v[1]-this.lastXY[1]);u[0]=(v[0]-this.nodeXY[0]);u[1]=(v[1]-this.nodeXY[1]);this.region={"0":v[0],"1":v[1],area:0,top:v[1],right:v[0]+this.get(m).get(k),bottom:v[1]+this.get(m).get(c),left:v[0]};this.fire(n,{pageX:v[0],pageY:v[1],scroll:s,info:{start:w,xy:v,delta:t,offset:u}});this.lastXY=v;},_defDragFn:function(s){if(this.get("move")){if(s.scroll){s.scroll.node.set("scrollTop",s.scroll.top);s.scroll.node.set("scrollLeft",s.scroll.left);}this.get(m).setXY([s.pageX,s.pageY]);this.realXY=[s.pageX,s.pageY];}},_move:function(u){if(this.get("lock")){return false;}else{this.mouseXY=[u.pageX,u.pageY];if(!this._dragThreshMet){var t=Math.abs(this.startXY[0]-u.pageX),s=Math.abs(this.startXY[1]-u.pageY);if(t>this.get("clickPixelThresh")||s>this.get("clickPixelThresh")){this._dragThreshMet=true;this.start();this._alignNode([u.pageX,u.pageY]);}}else{if(this._clickTimeout){this._clickTimeout.cancel();}this._alignNode([u.pageX,u.pageY]);}}},stopDrag:function(){if(this.get(g)){e._end();}return this;},destructor:function(){this._unprep();if(this.target){this.target.destroy();}e._unregDrag(this);}});d.namespace("DD");d.DD.Drag=a;},"3.4.0",{skinnable:false,requires:["dd-ddm-base"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("dd-constrain",function(b){var l="dragNode",n="offsetHeight",e="offsetWidth",q="host",f="tickXArray",o="tickYArray",p=b.DD.DDM,d="top",j="right",m="bottom",c="left",k="view",h=null,i="drag:tickAlignX",g="drag:tickAlignY",a=function(r){this._lazyAddAttrs=false;a.superclass.constructor.apply(this,arguments);};a.NAME="ddConstrained";a.NS="con";a.ATTRS={host:{},stickX:{value:false},stickY:{value:false},tickX:{value:false},tickY:{value:false},tickXArray:{value:false},tickYArray:{value:false},gutter:{value:"0",setter:function(r){return b.DD.DDM.cssSizestoObject(r);}},constrain:{value:k,setter:function(r){var s=b.one(r);if(s){r=s;}return r;}},constrain2region:{setter:function(s){return this.set("constrain",s);}},constrain2node:{setter:function(r){return this.set("constrain",b.one(r));}},constrain2view:{setter:function(r){return this.set("constrain",k);}},cacheRegion:{value:true}};h={_lastTickXFired:null,_lastTickYFired:null,initializer:function(){this._createEvents();this.get(q).on("drag:end",b.bind(this._handleEnd,this));this.get(q).on("drag:start",b.bind(this._handleStart,this));this.get(q).after("drag:align",b.bind(this.align,this));this.get(q).after("drag:drag",b.bind(this.drag,this));},_createEvents:function(){var r=this;var s=[i,g];b.each(s,function(u,t){this.publish(u,{type:u,emitFacade:true,bubbles:true,queuable:false,prefix:"drag"});},this);},_handleEnd:function(){this._lastTickYFired=null;this._lastTickXFired=null;},_handleStart:function(){this.resetCache();},_regionCache:null,_cacheRegion:function(){this._regionCache=this.get("constrain").get("region");},resetCache:function(){this._regionCache=null;},_getConstraint:function(){var r=this.get("constrain"),s=this.get("gutter"),t;if(r){if(r instanceof b.Node){if(!this._regionCache){b.on("resize",b.bind(this._cacheRegion,this),b.config.win);this._cacheRegion();}t=b.clone(this._regionCache);if(!this.get("cacheRegion")){this.resetCache();}}else{if(b.Lang.isObject(r)){t=b.clone(r);}}}if(!r||!t){r=k;}if(r===k){t=this.get(q).get(l).get("viewportRegion");}b.each(s,function(u,v){if((v==j)||(v==m)){t[v]-=u;}else{t[v]+=u;}});return t;},getRegion:function(w){var u={},v=null,s=null,t=this.get(q);u=this._getConstraint();if(w){v=t.get(l).get(n);s=t.get(l).get(e);u[j]=u[j]-s;u[m]=u[m]-v;}return u;},_checkRegion:function(s){var u=s,w=this.getRegion(),v=this.get(q),x=v.get(l).get(n),t=v.get(l).get(e);if(u[1]>(w[m]-x)){s[1]=(w[m]-x);}if(w[d]>u[1]){s[1]=w[d];}if(u[0]>(w[j]-t)){s[0]=(w[j]-t);}if(w[c]>u[0]){s[0]=w[c];}return s;},inRegion:function(t){t=t||this.get(q).get(l).getXY();var s=this._checkRegion([t[0],t[1]]),r=false;if((t[0]===s[0])&&(t[1]===s[1])){r=true;}return r;},align:function(){var u=this.get(q),s=[u.actXY[0],u.actXY[1]],t=this.getRegion(true);if(this.get("stickX")){s[1]=(u.startXY[1]-u.deltaXY[1]);}if(this.get("stickY")){s[0]=(u.startXY[0]-u.deltaXY[0]);}if(t){s=this._checkRegion(s);}s=this._checkTicks(s,t);u.actXY=s;},drag:function(v){var u=this.get(q),s=this.get("tickX"),t=this.get("tickY"),r=[u.actXY[0],u.actXY[1]];if((b.Lang.isNumber(s)||this.get(f))&&(this._lastTickXFired!==r[0])){this._tickAlignX();this._lastTickXFired=r[0];}if((b.Lang.isNumber(t)||this.get(o))&&(this._lastTickYFired!==r[1])){this._tickAlignY();this._lastTickYFired=r[1];}},_checkTicks:function(y,w){var v=this.get(q),x=(v.startXY[0]-v.deltaXY[0]),u=(v.startXY[1]-v.deltaXY[1]),s=this.get("tickX"),t=this.get("tickY");if(s&&!this.get(f)){y[0]=p._calcTicks(y[0],x,s,w[c],w[j]);}if(t&&!this.get(o)){y[1]=p._calcTicks(y[1],u,t,w[d],w[m]);}if(this.get(f)){y[0]=p._calcTickArray(y[0],this.get(f),w[c],w[j]);}if(this.get(o)){y[1]=p._calcTickArray(y[1],this.get(o),w[d],w[m]);}return y;},_tickAlignX:function(){this.fire(i);},_tickAlignY:function(){this.fire(g);}};b.namespace("Plugin");b.extend(a,b.Base,h);b.Plugin.DDConstrained=a;b.mix(p,{_calcTicks:function(y,x,u,w,v){var s=((y-x)/u),t=Math.floor(s),r=Math.ceil(s);if((t!==0)||(r!==0)){if((s>=t)&&(s<=r)){y=(x+(u*t));if(w&&v){if(y<w){y=(x+(u*(t+1)));}if(y>v){y=(x+(u*(t-1)));}}}}return y;},_calcTickArray:function(z,A,y,v){var s=0,w=A.length,u=0,t,r,x;if(!A||(A.length===0)){return z;}else{if(A[0]>=z){return A[0];}else{for(s=0;s<w;s++){u=(s+1);if(A[u]&&A[u]>=z){t=z-A[s];r=A[u]-z;x=(r>t)?A[s]:A[u];if(y&&v){if(x>v){if(A[s]){x=A[s];}else{x=A[w-1];}}}return x;}}return A[A.length-1];}}}});},"3.4.0",{skinnable:false,requires:["dd-drag"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("overlay",function(a){a.Overlay=a.Base.create("overlay",a.Widget,[a.WidgetStdMod,a.WidgetPosition,a.WidgetStack,a.WidgetPositionAlign,a.WidgetPositionConstrain]);},"3.4.0",{requires:["widget","widget-stdmod","widget-position","widget-stack","widget-position-align","widget-position-constrain"]});AUI.add("aui-overlay-manager",function(c){var i=c.Lang,j=i.isArray,b=i.isBoolean,n=i.isNumber,a=i.isString,l="boundingBox",f="default",m="host",h="OverlayManager",k="group",d="zIndex",g="zIndexBase";var e=c.Component.create({NAME:h.toLowerCase(),ATTRS:{zIndexBase:{value:1000,validator:n,setter:i.toInt}},EXTENDS:c.Base,prototype:{initializer:function(){var o=this;o._overlays=[];},bringToTop:function(p){var o=this;var r=o._overlays.sort(o.sortByZIndexDesc);var t=r[0];if(t!==p){var s=p.get(d);var q=t.get(d);p.set(d,q+1);p.set("focused",true);}},destructor:function(){var o=this;o._overlays=[];},register:function(s){var p=this;var t=p._overlays;if(j(s)){c.Array.each(s,function(w){p.register(w);});}else{var r=p.get(g);var v=p._registered(s);if(!v&&s&&((s instanceof c.Overlay)||(c.Component&&s instanceof c.Component))){var q=s.get(l);t.push(s);var u=s.get(d)||0;var o=t.length+u+r;s.set(d,o);s.on("focusedChange",p._onFocusedChange,p);q.on("mousedown",p._onMouseDown,p);}}return t;},remove:function(p){var o=this;var q=o._overlays;if(q.length){return c.Array.removeItem(q,p);}return null;},each:function(q){var o=this;var p=o._overlays;c.Array.each(p,q);},showAll:function(){this.each(function(o){o.show();});},hideAll:function(){this.each(function(o){o.hide();});},sortByZIndexDesc:function(p,o){if(!p||!o||!p.hasImpl(c.WidgetStack)||!o.hasImpl(c.WidgetStack)){return 0;}else{var q=p.get(d);var r=o.get(d);if(q>r){return -1;}else{if(q<r){return 1;}else{return 0;}}}},_registered:function(p){var o=this;return c.Array.indexOf(o._overlays,p)!=-1;},_onMouseDown:function(q){var o=this;var p=c.Widget.getByNode(q.currentTarget||q.target);var r=o._registered(p);if(p&&r){o.bringToTop(p);}},_onFocusedChange:function(q){var o=this;if(q.newVal){var p=q.currentTarget||q.target;var r=o._registered(p);if(p&&r){o.bringToTop(p);}}}}});c.OverlayManager=e;},"1.5.2",{requires:["aui-base","aui-overlay-base","overlay","plugin"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("dd-ddm",function(a){a.mix(a.DD.DDM,{_pg:null,_debugShim:false,_activateTargets:function(){},_deactivateTargets:function(){},_startDrag:function(){if(this.activeDrag&&this.activeDrag.get("useShim")){this._pg_activate();this._activateTargets();}},_endDrag:function(){this._pg_deactivate();this._deactivateTargets();},_pg_deactivate:function(){this._pg.setStyle("display","none");},_pg_activate:function(){var b=this.activeDrag.get("activeHandle"),c="auto";if(b){c=b.getStyle("cursor");}if(c=="auto"){c=this.get("dragCursor");}this._pg_size();this._pg.setStyles({top:0,left:0,display:"block",opacity:((this._debugShim)?".5":"0"),cursor:c});},_pg_size:function(){if(this.activeDrag){var c=a.one("body"),e=c.get("docHeight"),d=c.get("docWidth");this._pg.setStyles({height:e+"px",width:d+"px"});}},_createPG:function(){var d=a.Node.create("<div></div>"),b=a.one("body"),c;d.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"});d.set("id",a.stamp(d));d.addClass(a.DD.DDM.CSS_PREFIX+"-shim");b.prepend(d);this._pg=d;this._pg.on("mousemove",a.throttle(a.bind(this._move,this),this.get("throttleTime")));this._pg.on("mouseup",a.bind(this._end,this));c=a.one("win");a.on("window:resize",a.bind(this._pg_size,this));c.on("scroll",a.bind(this._pg_size,this));}},true);},"3.4.0",{skinnable:false,requires:["dd-ddm-base","event-resize"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("dd-ddm-drop",function(a){a.mix(a.DD.DDM,{_noShim:false,_activeShims:[],_hasActiveShim:function(){if(this._noShim){return true;}return this._activeShims.length;},_addActiveShim:function(b){this._activeShims[this._activeShims.length]=b;},_removeActiveShim:function(c){var b=[];a.each(this._activeShims,function(e,d){if(e._yuid!==c._yuid){b[b.length]=e;}});this._activeShims=b;},syncActiveShims:function(b){a.later(0,this,function(c){var d=((c)?this.targets:this._lookup());a.each(d,function(f,e){f.sizeShim.call(f);},this);},b);},mode:0,POINT:0,INTERSECT:1,STRICT:2,useHash:true,activeDrop:null,validDrops:[],otherDrops:{},targets:[],_addValid:function(b){this.validDrops[this.validDrops.length]=b;return this;},_removeValid:function(b){var c=[];a.each(this.validDrops,function(e,d){if(e!==b){c[c.length]=e;}});this.validDrops=c;return this;},isOverTarget:function(c){if(this.activeDrag&&c){var g=this.activeDrag.mouseXY,f,b=this.activeDrag.get("dragMode"),e,d=c.shim;if(g&&this.activeDrag){e=this.activeDrag.region;if(b==this.STRICT){return this.activeDrag.get("dragNode").inRegion(c.region,true,e);}else{if(c&&c.shim){if((b==this.INTERSECT)&&this._noShim){f=((e)?e:this.activeDrag.get("node"));return c.get("node").intersect(f,c.region).inRegion;}else{if(this._noShim){d=c.get("node");}return d.intersect({top:g[1],bottom:g[1],left:g[0],right:g[0]},c.region).inRegion;}}else{return false;}}}else{return false;}}else{return false;}},clearCache:function(){this.validDrops=[];this.otherDrops={};this._activeShims=[];},_activateTargets:function(){this._noShim=true;this.clearCache();a.each(this.targets,function(c,b){c._activateShim([]);if(c.get("noShim")==true){this._noShim=false;}},this);this._handleTargetOver();},getBestMatch:function(f,d){var c=null,e=0,b;a.each(f,function(i,h){var g=this.activeDrag.get("dragNode").intersect(i.get("node"));i.region.area=g.area;if(g.inRegion){if(g.area>e){e=g.area;c=i;}}},this);if(d){b=[];a.each(f,function(h,g){if(h!==c){b[b.length]=h;}},this);return[c,b];}else{return c;}},_deactivateTargets:function(){var b=[],c,e=this.activeDrag,d=this.activeDrop;if(e&&d&&this.otherDrops[d]){if(!e.get("dragMode")){b=this.otherDrops;delete b[d];}else{c=this.getBestMatch(this.otherDrops,true);d=c[0];b=c[1];}e.get("node").removeClass(this.CSS_PREFIX+"-drag-over");if(d){d.fire("drop:hit",{drag:e,drop:d,others:b});e.fire("drag:drophit",{drag:e,drop:d,others:b});}}else{if(e&&e.get("dragging")){e.get("node").removeClass(this.CSS_PREFIX+"-drag-over");e.fire("drag:dropmiss",{pageX:e.lastXY[0],pageY:e.lastXY[1]});}else{}}this.activeDrop=null;a.each(this.targets,function(g,f){g._deactivateShim([]);},this);},_dropMove:function(){if(this._hasActiveShim()){this._handleTargetOver();}else{a.each(this.otherDrops,function(c,b){c._handleOut.apply(c,[]);});}},_lookup:function(){if(!this.useHash||this._noShim){return this.validDrops;}var b=[];a.each(this.validDrops,function(d,c){if(d.shim&&d.shim.inViewportRegion(false,d.region)){b[b.length]=d;}});return b;},_handleTargetOver:function(){var b=this._lookup();a.each(b,function(d,c){d._handleTargetOver.call(d);},this);},_regTarget:function(b){this.targets[this.targets.length]=b;},_unregTarget:function(c){var b=[],d;a.each(this.targets,function(f,e){if(f!=c){b[b.length]=f;}},this);this.targets=b;d=[];a.each(this.validDrops,function(f,e){if(f!==c){d[d.length]=f;}});this.validDrops=d;},getDrop:function(c){var b=false,d=a.one(c);if(d instanceof a.Node){a.each(this.targets,function(f,e){if(d.compareTo(f.get("node"))){b=f;}});}return b;}},true);},"3.4.0",{skinnable:false,requires:["dd-ddm"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("dd-drop",function(a){var b="node",g=a.DD.DDM,f="offsetHeight",c="offsetWidth",i="drop:over",h="drop:enter",d="drop:exit",e=function(){this._lazyAddAttrs=false;e.superclass.constructor.apply(this,arguments);a.on("domready",a.bind(function(){a.later(100,this,this._createShim);},this));g._regTarget(this);};e.NAME="drop";e.ATTRS={node:{setter:function(j){var k=a.one(j);if(!k){a.error("DD.Drop: Invalid Node Given: "+j);}return k;}},groups:{value:["default"],setter:function(j){this._groups={};a.each(j,function(m,l){this._groups[m]=true;},this);return j;}},padding:{value:"0",setter:function(j){return g.cssSizestoObject(j);}},lock:{value:false,setter:function(j){if(j){this.get(b).addClass(g.CSS_PREFIX+"-drop-locked");}else{this.get(b).removeClass(g.CSS_PREFIX+"-drop-locked");}return j;}},bubbles:{setter:function(j){this.addTarget(j);return j;}},useShim:{value:true,setter:function(j){a.DD.DDM._noShim=!j;return j;}}};a.extend(e,a.Base,{_bubbleTargets:a.DD.DDM,addToGroup:function(j){this._groups[j]=true;return this;},removeFromGroup:function(j){delete this._groups[j];return this;},_createEvents:function(){var j=[i,h,d,"drop:hit"];a.each(j,function(m,l){this.publish(m,{type:m,emitFacade:true,preventable:false,bubbles:true,queuable:false,prefix:"drop"});},this);},_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(j){this._valid=false;var k=false;a.each(j,function(m,l){if(this._groups[m]){k=true;this._valid=true;}},this);return k;},initializer:function(j){a.later(100,this,this._createEvents);var k=this.get(b),l;if(!k.get("id")){l=a.stamp(k);k.set("id",l);}k.addClass(g.CSS_PREFIX+"-drop");this.set("groups",this.get("groups"));},destructor:function(){g._unregTarget(this);if(this.shim&&(this.shim!==this.get(b))){this.shim.detachAll();this.shim.remove();this.shim=null;}this.get(b).removeClass(g.CSS_PREFIX+"-drop");this.detachAll();},_deactivateShim:function(){if(!this.shim){return false;}this.get(b).removeClass(g.CSS_PREFIX+"-drop-active-valid");this.get(b).removeClass(g.CSS_PREFIX+"-drop-active-invalid");this.get(b).removeClass(g.CSS_PREFIX+"-drop-over");if(this.get("useShim")){this.shim.setStyles({top:"-999px",left:"-999px",zIndex:"1"});}this.overTarget=false;},_activateShim:function(){if(!g.activeDrag){return false;}if(this.get(b)===g.activeDrag.get(b)){return false;}if(this.get("lock")){return false;}var j=this.get(b);if(this.inGroup(g.activeDrag.get("groups"))){j.removeClass(g.CSS_PREFIX+"-drop-active-invalid");j.addClass(g.CSS_PREFIX+"-drop-active-valid");g._addValid(this);this.overTarget=false;if(!this.get("useShim")){this.shim=this.get(b);}this.sizeShim();}else{g._removeValid(this);j.removeClass(g.CSS_PREFIX+"-drop-active-valid");j.addClass(g.CSS_PREFIX+"-drop-active-invalid");}},sizeShim:function(){if(!g.activeDrag){return false;}if(this.get(b)===g.activeDrag.get(b)){return false;}if(this.get("lock")){return false;}if(!this.shim){a.later(100,this,this.sizeShim);return false;}var o=this.get(b),m=o.get(f),k=o.get(c),r=o.getXY(),q=this.get("padding"),j,n,l;k=k+q.left+q.right;m=m+q.top+q.bottom;r[0]=r[0]-q.left;r[1]=r[1]-q.top;if(g.activeDrag.get("dragMode")===g.INTERSECT){j=g.activeDrag;n=j.get(b).get(f);l=j.get(b).get(c);m=(m+n);k=(k+l);r[0]=r[0]-(l-j.deltaXY[0]);r[1]=r[1]-(n-j.deltaXY[1]);}if(this.get("useShim")){this.shim.setStyles({height:m+"px",width:k+"px",top:r[1]+"px",left:r[0]+"px"});}this.region={"0":r[0],"1":r[1],area:0,top:r[1],right:r[0]+k,bottom:r[1]+m,left:r[0]};},_createShim:function(){if(!g._pg){a.later(10,this,this._createShim);return;}if(this.shim){return;}var j=this.get("node");if(this.get("useShim")){j=a.Node.create('<div id="'+this.get(b).get("id")+'_shim"></div>');j.setStyles({height:this.get(b).get(f)+"px",width:this.get(b).get(c)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"});g._pg.appendChild(j);j.on("mouseover",a.bind(this._handleOverEvent,this));j.on("mouseout",a.bind(this._handleOutEvent,this));}this.shim=j;},_handleTargetOver:function(){if(g.isOverTarget(this)){this.get(b).addClass(g.CSS_PREFIX+"-drop-over");g.activeDrop=this;g.otherDrops[this]=this;if(this.overTarget){g.activeDrag.fire("drag:over",{drop:this,drag:g.activeDrag});this.fire(i,{drop:this,drag:g.activeDrag});}else{if(g.activeDrag.get("dragging")){this.overTarget=true;this.fire(h,{drop:this,drag:g.activeDrag});g.activeDrag.fire("drag:enter",{drop:this,drag:g.activeDrag});g.activeDrag.get(b).addClass(g.CSS_PREFIX+"-drag-over");}}}else{this._handleOut();}},_handleOverEvent:function(){this.shim.setStyle("zIndex","999");g._addActiveShim(this);},_handleOutEvent:function(){this.shim.setStyle("zIndex","1");g._removeActiveShim(this);},_handleOut:function(j){if(!g.isOverTarget(this)||j){if(this.overTarget){this.overTarget=false;if(!j){g._removeActiveShim(this);}if(g.activeDrag){this.get(b).removeClass(g.CSS_PREFIX+"-drop-over");g.activeDrag.get(b).removeClass(g.CSS_PREFIX+"-drag-over");this.fire(d);g.activeDrag.fire("drag:exit",{drop:this});delete g.otherDrops[this];}}}}});a.DD.Drop=e;},"3.4.0",{skinnable:false,requires:["dd-ddm-drop","dd-drag"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("dd-drop-plugin",function(a){var b=function(c){c.node=c.host;b.superclass.constructor.apply(this,arguments);};b.NAME="dd-drop-plugin";b.NS="drop";a.extend(b,a.DD.Drop);a.namespace("Plugin");a.Plugin.Drop=b;},"3.4.0",{skinnable:false,requires:["dd-drop"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("dd-delegate",function(e){var d=function(f){d.superclass.constructor.apply(this,arguments);},c="container",b="nodes",a=e.Node.create("<div>Temp Node</div>");e.extend(d,e.Base,{_bubbleTargets:e.DD.DDM,dd:null,_shimState:null,_handles:null,_onNodeChange:function(f){this.set("dragNode",f.newVal);},_afterDragEnd:function(f){e.DD.DDM._noShim=this._shimState;this.set("lastNode",this.dd.get("node"));this.get("lastNode").removeClass(e.DD.DDM.CSS_PREFIX+"-dragging");this.dd._unprep();this.dd.set("node",a);},_delMouseDown:function(h){var g=h.currentTarget,f=this.dd;if(g.test(this.get(b))&&!g.test(this.get("invalid"))){this._shimState=e.DD.DDM._noShim;e.DD.DDM._noShim=true;this.set("currentNode",g);f.set("node",g);if(f.proxy){f.set("dragNode",e.DD.DDM._proxy);}else{f.set("dragNode",g);}f._prep();f.fire("drag:mouseDown",{ev:h});}},_onMouseEnter:function(f){this._shimState=e.DD.DDM._noShim;e.DD.DDM._noShim=true;},_onMouseLeave:function(f){e.DD.DDM._noShim=this._shimState;},initializer:function(g){this._handles=[];var h=this.get("dragConfig")||{},f=this.get(c);h.node=a.cloneNode(true);h.bubbleTargets=this;if(this.get("handles")){h.handles=this.get("handles");}this.dd=new e.DD.Drag(h);this.dd.after("drag:end",e.bind(this._afterDragEnd,this));this.dd.on("dragNodeChange",e.bind(this._onNodeChange,this));this.dd.after("drag:mouseup",function(){this._unprep();});this._handles.push(e.delegate(e.DD.Drag.START_EVENT,e.bind(this._delMouseDown,this),f,this.get(b)));this._handles.push(e.on("mouseenter",e.bind(this._onMouseEnter,this),f));this._handles.push(e.on("mouseleave",e.bind(this._onMouseLeave,this),f));e.later(50,this,this.syncTargets);e.DD.DDM.regDelegate(this);},syncTargets:function(){if(!e.Plugin.Drop||this.get("destroyed")){return;}var g,f,h;if(this.get("target")){g=e.one(this.get(c)).all(this.get(b));f=this.dd.get("groups");h=this.get("dragConfig");if(h&&"groups" in h){f=h.groups;}g.each(function(j){this.createDrop(j,f);},this);}return this;},createDrop:function(h,f){var g={useShim:false,bubbleTargets:this};if(!h.drop){h.plug(e.Plugin.Drop,g);}h.drop.set("groups",f);return h;},destructor:function(){if(this.dd){this.dd.destroy();}if(e.Plugin.Drop){var f=e.one(this.get(c)).all(this.get(b));f.unplug(e.Plugin.Drop);}e.each(this._handles,function(g){g.detach();});}},{NAME:"delegate",ATTRS:{container:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:"input, select, button, a, textarea"},lastNode:{value:a},currentNode:{value:a},dragNode:{value:a},over:{value:false},target:{value:false},dragConfig:{value:null},handles:{value:null}}});e.mix(e.DD.DDM,{_delegates:[],regDelegate:function(f){this._delegates.push(f);},getDelegate:function(g){var f=null;g=e.one(g);e.each(this._delegates,function(h){if(g.test(h.get(c))){f=h;}},this);return f;}});e.namespace("DD");e.DD.Delegate=d;},"3.4.0",{skinnable:false,requires:["dd-drag","event-mouseenter","dd-drop-plugin"]});AUI.add("aui-resize-base",function(ar){var ac=ar.Lang,d=ac.isArray,aH=ac.isBoolean,aM=ac.isString,aE=ac.trim,o=ar.Array.indexOf,aj=".",w=",",u=" ",t="active",Q="activeHandle",W="activeHandleEl",C="all",av="autoHide",aB="bottom",aw="className",az="cursor",n="diagonal",aA="dotted",al="dragCursor",b="grip",ad="gripsmall",E="handle",P="handles",ai="hidden",a="horizontal",ag="icon",z="inner",c="left",O="margin",s="node",H="nodeName",aa="none",K="offsetHeight",aL="offsetWidth",f="parentNode",p="position",aD="proxy",D="proxyEl",l="relative",at="resize",r="resizing",i="right",aQ="static",k="top",ap="vertical",ax="wrap",aN="wrapper",ao="wrapTypes",M="resize:mouseUp",x="resize:resize",F="resize:align",N="resize:end",X="resize:start",ae="t",aP="tr",af="r",aG="br",aq="b",aJ="bl",ak="l",aR="tl",U=function(A){return(A instanceof ar.Node);},aS=function(A){return E+A.toUpperCase();},aO=function(){return Array.prototype.slice.call(arguments).join(u);},V=ar.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),G=ar.getClassName,m=G(ag),aI=G(ag,ad,n,aG),an=G(ag,b,aA,a),Z=G(ag,b,aA,ap),aF=G(at),ay=G(at,E),ah=G(at,E,t),g=G(at,E,z),I=G(at,E,z,"{handle}"),aT=G(at,E,"{handle}"),e=G(at,ai,P),y=G(at,aD),aK=G(at,aN),am=aO(m,aI),aC=aO(m,an),q=aO(m,Z),h=/^(t|tr|b|bl|br|tl)$/i,Y=/^(tl|l|bl)$/i,S=/^(tl|t|tr)$/i,J=/^(bl|br|l|r|tl|tr)$/i,au='<div class="'+aO(ay,aT)+'">'+'<div class="'+aO(g,I)+'"></div>'+"</div>",ab='<div class="'+y+'"></div>',aU='<div class="'+aK+'"></div>',v=[ae,aP,af,aG,aq,aJ,ak,aR];var j=ar.Component.create({NAME:at,ATTRS:{activeHandle:{value:null,validator:aM},activeHandleEl:{value:null,validator:U},autoHide:{value:false,validator:aH},handles:{setter:function(L){var A=this;var B=[];if(d(L)){B=L;}else{if(aM(L)){if(L.toLowerCase()==C){B=v;}else{ar.each(L.split(w),function(T,R){var aV=aE(T);if(o(v,aV)>-1){B.push(aV);}});}}}return B;},value:C},node:{setter:ar.one},proxy:{value:false,validator:aH},proxyEl:{setter:ar.one,valueFn:function(){return ar.Node.create(ab);}},resizing:{value:false,validator:aH},wrap:{setter:function(R){var A=this;var L=A.get(s);var T=L.get(H);var B=A.get(ao);if(B.test(T)){R=true;}return R;},value:false,validator:aH},wrapTypes:{readOnly:true,value:/canvas|textarea|input|select|button|img/i},wrapper:{setter:function(){var A=this;var B=A.get(s);var L=B;if(A.get(ax)){L=ar.Node.create(aU);B.placeBefore(L);L.append(B);A._copyStyles(B,L);B.setStyles({position:aQ,left:0,top:0});}return L;},value:null,writeOnce:true}},EXTENDS:ar.Base,prototype:{CSS_INNER_HANDLE_MAP:{r:q,l:q,t:aC,b:aC,br:am},changeHeightHandles:false,changeLeftHandles:false,changeTopHandles:false,changeWidthHandles:false,delegate:null,info:null,lastInfo:null,originalInfo:null,initializer:function(){var A=this;A.info={};A.originalInfo={};A.get(s).addClass(aF);A.renderer();},renderUI:function(){var A=this;A._renderHandles();A._renderProxy();},bindUI:function(){var A=this;A._createEvents();A._bindDD();A._bindHandle();},syncUI:function(){var A=this;A._setHideHandlesUI(A.get(av));},destructor:function(){var A=this;var B=A.get(s);var L=A.get(aN);ar.Event.purgeElement(L,true);A.eachHandle(function(R){A.delegate.dd.destroy();R.remove(true);});if(A.get(ax)){B.setStyles({margin:L.getStyle(O),position:L.getStyle(p)});L.placeBefore(B);L.remove(true);}B.removeClass(aF);B.removeClass(e);},renderer:function(){this.renderUI();this.bindUI();this.syncUI();},eachHandle:function(B){var A=this;ar.each(A.get(P),function(T,L){var R=A.get(aS(T));B.apply(A,[R,T,L]);});},_bindDD:function(){var A=this;A.delegate=new ar.DD.Delegate({bubbleTargets:A,container:A.get(aN),dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:true,move:false},nodes:aj+ay,target:false});A.on("drag:drag",A._handleResizeEvent);A.on("drag:dropmiss",A._handleMouseUpEvent);A.on("drag:end",A._handleResizeEndEvent);A.on("drag:start",A._handleResizeStartEvent);},_bindHandle:function(){var A=this;var B=A.get(aN);B.on("mouseenter",ar.bind(A._onWrapperMouseEnter,A));B.on("mouseleave",ar.bind(A._onWrapperMouseLeave,A));B.delegate("mouseenter",ar.bind(A._onHandleMouseEnter,A),aj+ay);B.delegate("mouseleave",ar.bind(A._onHandleMouseLeave,A),aj+ay);},_createEvents:function(){var A=this;var B=function(L,R){A.publish(L,{defaultFn:R,queuable:false,emitFacade:true,bubbles:true,prefix:at});};B(X,this._defResizeStartFn);B(x,this._defResizeFn);B(F,this._defResizeAlignFn);B(N,this._defResizeEndFn);B(M,this._defMouseUpFn);},_renderHandles:function(){var A=this;var B=A.get(aN);A.eachHandle(function(L){B.append(L);});},_renderProxy:function(){var B=this;var A=B.get(D);B.get(aN).get(f).append(A.hide());},_buildHandle:function(L){var A=this;var B=ar.Node.create(ac.sub(au,{handle:L}));B.one(aj+g).addClass(A.CSS_INNER_HANDLE_MAP[L]);return B;},_checkSize:function(aV,B){var A=this;var T=A.info;var R=A.originalInfo;var L=(aV==K)?k:c;T[aV]=B;if(((L==c)&&A.changeLeftHandles)||((L==k)&&A.changeTopHandles)){T[L]=R[L]+R[aV]-B;}},_copyStyles:function(T,aV){var B=this;var A=T.getStyle(p).toLowerCase();if(A==aQ){A=l;}var R={position:A};var L={};ar.each([k,i,aB,c],function(aX){var aW=O+V(aX);L[aW]=aV.getStyle(aW);R[aW]=T.getStyle(aW);});aV.setStyles(R);T.setStyles(L);T.setStyles({margin:0});aV.set(K,T.get(K));aV.set(aL,T.get(aL));},_extractHandleName:ar.cached(function(L){var B=L.get(aw);var A=B.match(new RegExp(G(at,E,"(\\w{1,2})\\b")));return A?A[1]:null;}),_getInfo:function(T,A){var aZ=this,aV;var aX=A.dragEvent.target;if(A){aV=(aX.actXY.length?aX.actXY:aX.lastXY);}var aW=T.getXY();var R=aW[0];var L=aW[1];var B=T.get(K);var aY=T.get(aL);return{actXY:aV,bottom:(L+B),left:R,offsetHeight:B,offsetWidth:aY,right:(R+aY),top:L};},_resize:function(){var A=this;var R=A.get(Q);var aV=A.info;var T=A.originalInfo;var L=aV.actXY[0]-T.actXY[0];var B=aV.actXY[1]-T.actXY[1];var aW={t:function(){aV.top=T.top+B;aV.offsetHeight=T.offsetHeight-B;},r:function(){aV.offsetWidth=T.offsetWidth+L;},l:function(){aV.left=T.left+L;aV.offsetWidth=T.offsetWidth-L;},b:function(){aV.offsetHeight=T.offsetHeight+B;},tr:function(){this.t();
this.r();},br:function(){this.b();this.r();},tl:function(){this.t();this.l();},bl:function(){this.b();this.l();}};aW[R](L,B);},_setOffset:function(L,B,A){L.set(aL,B);L.set(K,A);},_syncUI:function(){var A=this;var L=A.info;var R=A.get(aN);var B=A.get(s);A._setOffset(R,L.offsetWidth,L.offsetHeight);if(A.changeLeftHandles||A.changeTopHandles){R.setXY([L.left,L.top]);}if(!R.compareTo(B)){A._setOffset(B,L.offsetWidth,L.offsetHeight);}if(ar.UA.webkit){B.setStyle(at,aa);}},_syncProxyUI:function(){var B=this;var R=B.info;var L=B.get(W);var A=B.get(D);var T=L.getStyle(az);A.show().setStyle(az,T);B.delegate.dd.set(al,T);B._setOffset(A,R.offsetWidth,R.offsetHeight);A.setXY([R.left,R.top]);},_updateChangeHandleInfo:function(B){var A=this;A.changeHeightHandles=h.test(B);A.changeLeftHandles=Y.test(B);A.changeTopHandles=S.test(B);A.changeWidthHandles=J.test(B);},_updateInfo:function(B){var A=this;A.info=A._getInfo(A.get(aN),B);},_setActiveHandlesUI:function(L){var A=this;var B=A.get(W);if(B){if(L){A.eachHandle(function(R){R.removeClass(ah);});B.addClass(ah);}else{B.removeClass(ah);}}},_setHideHandlesUI:function(B){var A=this;var L=A.get(aN);if(!A.get(r)){if(B){L.addClass(e);}else{L.removeClass(e);}}},_defMouseUpFn:function(B){var A=this;A.set(r,false);},_defResizeFn:function(B){var A=this;A._handleResizeAlignEvent(B.dragEvent);if(A.get(aD)){A._syncProxyUI();}else{A._syncUI();}},_defResizeAlignFn:function(B){var A=this;var R=A.originalInfo;A.lastInfo=A.info;A._updateInfo(B);var L=A.info;A._resize();if(!A.con){if(L.offsetHeight<=15){A._checkSize(K,15);}if(L.offsetWidth<=15){A._checkSize(aL,15);}}},_defResizeEndFn:function(L){var A=this;var B=L.dragEvent.target;B.actXY=[];if(A.get(aD)){A._syncProxyUI();A.get(D).hide();}A._syncUI();A.set(Q,null);A.set(W,null);A._setActiveHandlesUI(false);},_defResizeStartFn:function(B){var A=this;A.set(r,true);A.originalInfo=A._getInfo(A.get(aN),B);A._updateInfo(B);},_handleMouseUpEvent:function(A){this.fire(M,{dragEvent:A,info:this.info});},_handleResizeEvent:function(A){this.fire(x,{dragEvent:A,info:this.info});},_handleResizeAlignEvent:function(A){this.fire(F,{dragEvent:A,info:this.info});},_handleResizeEndEvent:function(A){this.fire(N,{dragEvent:A,info:this.info});},_handleResizeStartEvent:function(A){this.fire(X,{dragEvent:A,info:this.info});},_onWrapperMouseEnter:function(B){var A=this;if(A.get(av)){A._setHideHandlesUI(false);}},_onWrapperMouseLeave:function(B){var A=this;if(A.get(av)){A._setHideHandlesUI(true);}},_onHandleMouseEnter:function(L){var A=this;var B=L.currentTarget;var R=A._extractHandleName(B);if(!A.get(r)){A.set(Q,R);A.set(W,B);A._setActiveHandlesUI(true);A._updateChangeHandleInfo(R);}},_onHandleMouseLeave:function(B){var A=this;if(!A.get(r)){A._setActiveHandlesUI(false);}}}});ar.each(v,function(B,A){j.ATTRS[aS(B)]={setter:function(){return this._buildHandle(B);},value:null,writeOnce:true};});ar.Resize=j;},"1.5.2",{skinnable:true,requires:["aui-base","dd-drag","dd-delegate","dd-drop"]});AUI.add("aui-resize-constrain",function(t){var i=t.Lang,o=i.isBoolean,s=i.isNumber,q=i.isString,z=function(A){return(A instanceof t.Node);},D="borderBottomWidth",f="borderLeftWidth",y="borderRightWidth",j="borderTopWidth",m="bottom",l="con",E="constrain",F="host",r="left",h="maxHeight",v="maxWidth",a="minHeight",k="minWidth",G="node",b="offsetHeight",n="offsetWidth",d="preserveRatio",x="region",u="resizeConstrained",p="right",e="tickX",c="tickY",w="top",C="view",B="viewportRegion";function g(){g.superclass.constructor.apply(this,arguments);}t.mix(g,{NAME:u,NS:l,ATTRS:{constrain:{setter:function(A){if(A&&(z(A)||q(A)||A.nodeType)){A=t.one(A);}return A;}},minHeight:{value:15,validator:s},minWidth:{value:15,validator:s},maxHeight:{value:Infinity,validator:s},maxWidth:{value:Infinity,validator:s},preserveRatio:{value:false,validator:o},tickX:{value:false},tickY:{value:false}}});t.extend(g,t.Plugin.Base,{constrainBorderInfo:null,initializer:function(){var A=this;var H=A.get(F);A.constrainBorderInfo={bottom:0,left:0,right:0,top:0};H.delegate.dd.plug(t.Plugin.DDConstrained,{tickX:A.get(e),tickY:A.get(c)});H.after("resize:align",t.bind(A._handleResizeAlignEvent,A));H.on("resize:start",t.bind(A._handleResizeStartEvent,A));},_checkConstrain:function(H,P,I){var N=this;var Q=N.get(F);var A=Q.info;var L=N._getConstrainRegion();if(L){var M=A[H]+A[I];var J=L[P]-N.constrainBorderInfo[P];if(M>=J){A[I]-=(M-J);}var K=A[H];var O=L[H]+N.constrainBorderInfo[H];if(K<=O){A[H]+=(O-K);A[I]-=(O-K);}}},_checkHeight:function(){var A=this;var I=A.get(F);var L=I.info;var K=I.originalInfo;var H=A.get(h);var J=A.get(a);A._checkConstrain(w,m,b);if(L.offsetHeight>H){I._checkSize(b,H);}if(L.offsetHeight<J){I._checkSize(b,J);}},_checkRatio:function(){var U=this;var N=U.get(F);var T=N.info;var J=N.originalInfo;var M=J.offsetWidth;var V=J.offsetHeight;var L=J.top;var W=J.left;var P=J.bottom;var S=J.right;var I=function(){return(T.offsetWidth/M);};var K=function(){return(T.offsetHeight/V);};var O=N.changeHeightHandles;if(U.get(E)&&N.changeHeightHandles&&N.changeWidthHandles){var Q=U._getConstrainRegion();var X=U.constrainBorderInfo;var A=(Q.bottom-X.bottom)-P;var R=W-(Q.left+X.left);var H=(Q.right-X.right)-S;var Y=L-(Q.top+X.top);if(N.changeLeftHandles&&N.changeTopHandles){O=(Y<R);}else{if(N.changeLeftHandles){O=(A<R);}else{if(N.changeTopHandles){O=(Y<H);}else{O=(A<H);}}}}if(O){T.offsetWidth=M*K();U._checkWidth();T.offsetHeight=V*I();}else{T.offsetHeight=V*I();U._checkHeight();T.offsetWidth=M*K();}if(N.changeTopHandles){T.top=L+(V-T.offsetHeight);}if(N.changeLeftHandles){T.left=W+(M-T.offsetWidth);}t.each(T,function(aa,Z){if(s(aa)){T[Z]=Math.round(aa);}});},_checkRegion:function(){var A=this;var H=A.get(F);var I=A._getConstrainRegion();return t.DOM.inRegion(null,I,true,H.info);},_checkWidth:function(){var A=this;var J=A.get(F);var L=J.info;var K=J.originalInfo;var I=A.get(v);var H=A.get(k);A._checkConstrain(r,p,n);if(L.offsetWidth<H){J._checkSize(n,H);}if(L.offsetWidth>I){J._checkSize(n,I);}},_getConstrainRegion:function(){var A=this;var I=A.get(F);var H=I.get(G);var K=A.get(E);var J=null;if(K){if(K==C){J=H.get(B);}else{if(z(K)){J=K.get(x);}else{J=K;}}}return J;},_handleResizeAlignEvent:function(I){var A=this;var H=A.get(F);A._checkHeight();A._checkWidth();if(A.get(d)){A._checkRatio();}if(A.get(E)&&!A._checkRegion()){H.info=H.lastInfo;}},_handleResizeStartEvent:function(H){var A=this;A._updateConstrainBorderInfo();},_updateConstrainBorderInfo:function(){var H=this;var I=H.get(E);if(z(I)){var A=function(J){return parseFloat(I.getStyle(J))||0;};H.constrainBorderInfo.bottom=A(D);H.constrainBorderInfo.left=A(f);H.constrainBorderInfo.right=A(y);H.constrainBorderInfo.top=A(j);}}});t.namespace("Plugin");t.Plugin.ResizeConstrained=g;},"1.5.2",{requires:["aui-resize-base","dd-constrain","plugin"],skinnable:false});AUI.add("aui-dialog",function(p){var ad=p.Lang,u=p.Object,J=ad.isBoolean,B=ad.isArray,O=ad.isObject,k=ad.toInt,D=p.WidgetStdMod,L=p.config.doc,t="",V="boundingBox",Y="button",c="buttons",T="clickoutside",W="close",P="closethick",K="constrain2view",U="data-tabindex",d="dd",X="destroyOnClose",w="dialog",x=".",C="dragConfig",Z=5,m="dragInstance",o="draggable",g="focusoutside",h="footerContent",R="hd",I="height",G="icon",b="icons",s="io",v="loading",z="modal",ab="proxy",e="resizable",F="resizableConfig",n="resizableInstance",E="stack",Q="tabIndex",j="useARIA",N="viewportRegion",aa="visible",f="width",ac="zIndex",q="resize:resize",M="resize:end",i=p.getClassName,y=i(w),a=i(w,R),H=L.createTextNode("");var r=function(A){if(!p.DialogMask){p.DialogMask=new p.OverlayMask({visible:true}).render();}};p.mix(r,{ATTRS:{bodyContent:{value:H},buttons:{validator:B,value:[]},close:{value:true},constrain2view:{setter:"_setConstrain2view",validator:J,value:false},destroyOnClose:{validator:J,value:false},dragConfig:{setter:function(ae){var A=this;return p.merge({bubbleTargets:A,handles:[x+a],node:A.get(V)},ae||{});},validator:O,value:{},writeOnce:true},draggable:{value:true},dragInstance:{setter:"_setDragInstance",value:null},focusOn:{validator:p.Lang.isArray,valueFn:function(){return[{eventName:T},{eventName:g}];}},modal:{lazyAdd:false,validator:J,value:false},resizable:{value:true},resizableConfig:{setter:function(ae){var A=this;return p.merge({after:{end:p.bind(A._syncResizableDimentions,A),resize:p.bind(A._syncResizableDimentions,A)},bubbleTargets:A,constrain2view:true,handles:"r,br,b",minHeight:100,minWidth:200,node:A.get(V),proxy:true},ae||{});},validator:O,value:{},writeOnce:true},resizableInstance:{setter:"_setResizableInstance",value:null},stack:{setter:function(A){return this._setStack(A);},validator:J,value:true},strings:{value:{close:"Close dialog"}}},NAME:w});r.prototype={_uiHandlesModal:null,initializer:function(af){var A=this;var ai=A.get(c);var aj=A.get(W);var ah=A.get(b);if(ai&&ai.length&&!A.get(h)){A.set(h,H);}if(aj){var ag=p.guid();var ae={handler:{context:A,fn:A.close},icon:P,id:ag,title:A.get("strings").close};if(ah){ah.push(ae);}A.set(b,ah);A._closeId=ag;}A.publish("close",{defaultFn:A._close});A.addTarget(p.DialogManager);A.after("constrain2viewChange",A._afterConstrain2viewChange);A.after("drag:start",A._afterDragStart);A.after("draggableChange",A._afterDraggableChange);A.after("dragInstanceChange",A._afterDragInstanceChange);A.after("render",A._afterRenderer);A.after("resizableChange",A._afterResizableChange);A.after("resizableInstanceChange",A._afterResizableInstanceChange);},bindUI:function(){var A=this;if(A.get(z)){A.after("focusOnChange",A._afterFocusOnChange());}A._bindLazyComponents();},syncUI:function(){var A=this;if(A.get(j)){A.plug(p.Plugin.Aria,{attributes:{visible:{ariaName:"hidden",format:function(ae){return !ae;}}}});}},destructor:function(){var A=this;p.Event.purgeElement(A.get(V),true);p.DialogManager.remove(A);},alignToViewport:function(ah,ag){var ae=this;var ai=p.getDoc().get(N);var af=ai.left+k(ah);var A=ai.top+k(ag);ae.move([af,A]);},close:function(){var A=this;A.fire("close");},_afterConstrain2viewChange:function(ae){var A=this;A._updateDDConstrain2view(A.get(m));},_afterDraggableChange:function(ae){var A=this;A.set(m,null);},_afterDragInstanceChange:function(ae){var A=this;var af=ae.prevVal;if(af){af.destroy();}},_afterDragStart:function(A){var am=this;var ai=am.get(K);if(!ai){var al=am.get(m);var ag=al.get("dragNode");var af=ag.get("region");var ah=ag.get("viewportRegion");var ak=[0,0];var ae=al.deltaXY||ak;var aj=al.mouseXY||ak;al.plug(p.Plugin.DDConstrained,{constrain:{bottom:ah.bottom+(af.height-ae[1])-Z,left:ah.left-ae[0]+Z,right:ah.right+(af.right-aj[0])+Z,top:ah.top-ae[1]+Z}});}},_afterFocusOnChange:function(ae){var A=this;A._detachUIHandlesModal();if(A.get(aa)){A._attachUIHandlesModal();}},_afterRenderer:function(ae){var A=this;A._initButtons();A.get(E);A.get(s);},_afterResizableChange:function(ae){var A=this;A.set(n,null);},_afterResizableInstanceChange:function(ae){var A=this;var af=ae.prevVal;if(af){af.destroy();}},_attachUIHandlesModal:function(){var aj=this;var af=aj.get(V);var al=aj.get("focusOn");var ah=aj.get("maskNode");var am=p.bind(aj._focus,aj);var A=[];for(var ag=0;ag<al.length;ag++){var ai=al[ag].eventName;var ak=al[ag].keyCode;var ae=al[ag].node;if(!ae&&!ak&&ai){A.push(af.on(ai,am));}else{if(ae&&!ak&&ai){A.push(ae.on(ai,am));}else{if(ae&&ak&&ai){A.push(ae.on(ai,am,ak));}else{p.log('focusOn ATTR Error: The event with name "'+ai+'" could not be attached.');}}}}aj._uiHandlesModal=A;},_bindLazyComponents:function(){var A=this;var ae=A.get(V);ae.on("mouseenter",p.bind(A._initLazyComponents,A));},_close:function(){var A=this;if(A.get(X)){A.destroy();}else{A.hide();}},_detachUIHandlesModal:function(){var A=this;p.each(A._uiHandlesModal,function(ae){ae.detach();});A._uiHandlesModal=null;},_focus:function(ag){var A=this;var af=A.get(V);var ae=af.get("tabIndex");af.set("tabIndex",ae>=0?ae:0);A.focus();},_initButtons:function(){var A=this;var af=A.get(c);if(af.length){var ae=new p.Toolbar({children:af});ae._DEFAULT_CONTEXT=A;ae.render(A.footerNode);A.fire("contentUpdate");A.buttons=ae;}},_initLazyComponents:function(){var A=this;A.get(m);A.get(n);},_setDefaultARIAValues:function(){var A=this;var ae=A.icons;if(!A.get(j)){return;}A.aria.setRole("dialog",A.get(V));if(ae){var af=ae.item(A._closeId)||null;if(af){A.aria.setAttribute("controls",A.get("id"),af.get(V));}}},_setDragInstance:function(ae){var A=this;if(A.get(o)){ae=new p.DD.Drag(A.get(C));A._updateDDConstrain2view(ae);}return ae;},_setResizableInstance:function(ae){var A=this;if(A.get(e)){ae=new p.Resize(A.get(F));}return ae;},_setStack:function(ae){var A=this;if(ae){p.DialogManager.register(A);}else{p.DialogManager.remove(A);}return ae;},_syncResizableDimentions:function(af){var A=this;var ag=af.info;var ae=af.type;if((ae===M)||((ae===q)&&!af.currentTarget.get(ab))){A.set(I,ag.offsetHeight);A.set(f,ag.offsetWidth);
}},_updateDDConstrain2view:function(ae){var A=this;ae.plug(p.Plugin.DDConstrained,{constrain2view:A.get(K)});}};p.Dialog=p.Component.create({AUGMENTS:[r,p.WidgetPosition,p.WidgetStack,p.WidgetPositionAlign,p.WidgetPositionConstrain],EXTENDS:p.Panel,NAME:w});var l=new p.OverlayManager({zIndexBase:1000});var S={};l._MODALS=S;l.after(["dialog:destroy","dialog:modalChange","dialog:render","dialog:visibleChange"],function(ae){var A=ae.target;if(A){var af=A.get("id");if(ae.type!=="dialog:destroy"&&A.get("visible")&&A.get("modal")){S[af]=true;p.DialogMask.show();l._blockIFrameFocus();}else{delete S[af];if(u.isEmpty(S)){p.DialogMask.hide();l._unblockIFrameFocus();}}}});p.mix(l,{closeByChild:function(A){return l.findByChild(A).close();},findByChild:function(A){return p.Widget.getByNode(p.one(A).ancestor(x+y,true));},refreshByChild:function(ae){var A=l.findByChild(ae);if(A&&A.io){A.io.start();}},_blockIFrameFocus:function(){p.all("iframe").each(function(){if(this.ancestor(x+y)===null){if(!this.hasAttribute(U)){this.setAttribute(U,this.get(Q));}this.set(Q,-1);}});},_unblockIFrameFocus:function(){p.all("iframe").each(function(){if(this.hasAttribute(U)){this.set(Q,this.getAttribute(U));}});}});p.DialogManager=l;},"1.5.2",{requires:["aui-panel","dd-constrain","aui-button-item","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});AUI.add("liferay-portlet-url",function(a){var b=function(d,e){var c=this;c.params=e||{};c.options={copyCurrentRenderParameters:null,doAsGroupId:null,doAsUserId:null,encrypt:null,escapeXML:null,lifecycle:d,name:null,p_l_id:themeDisplay.getPlid(),portletConfiguration:false,portletId:null,portletMode:null,resourceId:null,secure:null,windowState:null};c._parameterMap={javaClass:"java.util.HashMap",map:{}}};b.prototype={setCopyCurrentRenderParameters:function(d){var c=this;c.options.copyCurrentRenderParameters=d;return c},setDoAsGroupId:function(d){var c=this;c.options.doAsGroupId=d;return c},setDoAsUserId:function(d){var c=this;c.options.doAsUserId=d;return c},setEncrypt:function(d){var c=this;c.options.encrypt=d;return c},setEscapeXML:function(d){var c=this;c.options.escapeXML=d;return c},setLifecycle:function(d){var c=this;c.options.lifecycle=d;return c},setName:function(d){var c=this;c.options.name=d;return c},setParameter:function(d,e){var c=this;c.params[d]=e;return c},setPlid:function(d){var c=this;c.options.p_l_id=d;return c},setPortletConfiguration:function(d){var c=this;c.options.portletConfiguration=d;return c},setPortletId:function(d){var c=this;c.options.portletId=d;return c},setPortletMode:function(d){var c=this;c.options.portletMode=d;return c},setResourceId:function(d){var c=this;c.options.resourceId=d;return c},setSecure:function(d){var c=this;c.options.secure=d;return c},setWindowState:function(d){var c=this;c.options.windowState=d;return c},toString:function(){var c=this;c._forceStringValues(c.params);c._forceStringValues(c.options);c._parameterMap.map=a.merge(c._parameterMap.map,c.params);var d=null;a.io.request(themeDisplay.getPathContext()+"/c/portal/portlet_url",{sync:true,data:c._buildRequestData(),on:{complete:function(e,g,f){d=f.responseText}},type:"GET"});return d},_buildRequestData:function(){var c=this;var d={};a.each(c.options,function(f,e){if(f!==null){d[e]=[f].join("")}});d.parameterMap=a.JSON.stringify(c._parameterMap);return a.QueryString.stringify(d)},_forceStringValues:function(c){a.each(c,function(e,d){if(e!==null){c[d]=[e].join("")}});return c}};a.mix(b,{createActionURL:function(){return new b("ACTION_PHASE")},createPermissionURL:function(g,c,e,f){var h=location.href;var d=b.createRenderURL();d.setDoAsGroupId(themeDisplay.getScopeGroupId());d.setParameter("struts_action","/portlet_configuration/edit_permissions");d.setParameter("redirect",h);if(!themeDisplay.isStateMaximized()){d.setParameter("returnToFullPageURL",h)}d.setParameter("portletResource",g);d.setParameter("modelResource",c);d.setParameter("modelResourceDescription",e);d.setParameter("resourcePrimKey",f);d.setPortletId(86);d.setWindowState("MAXIMIZED");return d},createRenderURL:function(){return new b("RENDER_PHASE")},createResourceURL:function(){return new b("RESOURCE_PHASE")}});Liferay.PortletURL=b},"",{requires:["aui-base","aui-io-request","querystring-stringify-simple"]});